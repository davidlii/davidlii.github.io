

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="Davidli">
  
    <meta name="description" content="1.Struct 与 Class相同点：  定义属性和方法； 使用下标语法subscript syntax； 定义初始化器设置初始状态； 添加扩展、实现协议；  class 独有的特性：  继承 类型转换Type casting 析构 class 的实例可被多个对象引用  最大的不同：struct 是值类型，class 是引用类型。 2.比较符：&#x3D;&#x3D;与&#x3D;&#x3D;&#x3D; Note that identical">
<meta property="og:type" content="article">
<meta property="og:title" content="Swift 中的常见问题">
<meta property="og:url" content="http://yoursite.com/2018/09/13/swift-faq.html">
<meta property="og:site_name" content="Davidli">
<meta property="og:description" content="1.Struct 与 Class相同点：  定义属性和方法； 使用下标语法subscript syntax； 定义初始化器设置初始状态； 添加扩展、实现协议；  class 独有的特性：  继承 类型转换Type casting 析构 class 的实例可被多个对象引用  最大的不同：struct 是值类型，class 是引用类型。 2.比较符：&#x3D;&#x3D;与&#x3D;&#x3D;&#x3D; Note that identical">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-09-13T14:58:04.000Z">
<meta property="article:modified_time" content="2019-06-21T14:16:04.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Swift">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Swift 中的常见问题 - Davidli</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"yoursite.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Davidli</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Swift 中的常见问题"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2018-09-13 22:58" pubdate>
          2018年9月13日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          8.7k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          73 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Swift 中的常见问题</h1>
            
            
              <div class="markdown-body">
                
                <h3 id="1-Struct-与-Class"><a href="#1-Struct-与-Class" class="headerlink" title="1.Struct 与 Class"></a>1.Struct 与 Class</h3><p>相同点：</p>
<ul>
<li>定义属性和方法；</li>
<li>使用下标语法<code>subscript syntax</code>；</li>
<li>定义初始化器设置初始状态；</li>
<li>添加扩展、实现协议；</li>
</ul>
<p>class 独有的特性：</p>
<ul>
<li>继承</li>
<li>类型转换<code>Type casting</code></li>
<li>析构</li>
<li>class 的实例可被多个对象引用</li>
</ul>
<p>最大的不同：struct 是值类型，class 是引用类型。</p>
<h3 id="2-比较符：-与"><a href="#2-比较符：-与" class="headerlink" title="2.比较符：==与==="></a>2.比较符：<code>==</code>与<code>===</code></h3><blockquote>
<p>Note that identical to (represented by three equals signs, or &#x3D;&#x3D;&#x3D;) doesn’t mean the same thing as equal to (represented by two equals signs, or &#x3D;&#x3D;). Identical to means that two constants or variables of class type refer to exactly the same class instance. Equal to means that two instances are considered equal or equivalent in value, for some appropriate meaning of equal, as defined by the type’s designer.</p>
</blockquote>
<blockquote>
<p>When you define your own custom structures and classes, it’s your responsibility to decide what qualifies as two instances being equal. </p>
</blockquote>
<ul>
<li><code>===</code>表示两个实例引用了相同的对象，强调“引用”相同；</li>
<li><code>==</code> 表示两个实例中的值“相等”，至于哪些值相等，需要自己在类中定义；</li>
</ul>
<p>2.1、自定义类时，实现<code>Equatable</code>协议并重写全局操作符<code>==</code>来决定两个操作数是否相等。<br><br/></p>
<p>#示例1</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>:Equatable &#123;<br>    <br>    <span class="hljs-keyword">var</span> name: <span class="hljs-built_in">String</span>?<br>    <br>    <span class="hljs-keyword">static</span> func ==<span class="hljs-function"><span class="hljs-params">(lhs:Cat, rhs:Cat)</span> -&gt;</span> Bool &#123;<br>        <span class="hljs-keyword">if</span> lhs.name == rhs.name&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>调用并打印结果：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">let cat1 = <span class="hljs-built_in">Cat</span>()<br>let cat2 = <span class="hljs-built_in">Cat</span>()<br>cat1<span class="hljs-selector-class">.name</span> = <span class="hljs-string">&quot;Miao&quot;</span><br>cat2<span class="hljs-selector-class">.name</span> = <span class="hljs-string">&quot;Miao&quot;</span><br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(cat1 == cat2)</span></span> <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure>

<p>2.2、注意，<code>===</code>的左右两个操作数必须是类的实例，对枚举或结构体及其变种（String、Array、Dictionary）等使用时会报错。</p>
<h3 id="3-属性的修饰符"><a href="#3-属性的修饰符" class="headerlink" title="3.属性的修饰符"></a>3.属性的修饰符</h3><h4 id="3-1-强弱"><a href="#3-1-强弱" class="headerlink" title="3.1.强弱"></a>3.1.强弱</h4><p>Swift 里属性默认是强类型的，OC 中<code>strong</code>属性在 Swift 中会转换为<code>存储属性</code>。<br><br/></p>
<p>Swift 中的<code>weak</code>对应 OC 中的<code>weak</code>，仅能修饰引用类型的属性，不能修饰<code>String</code>、<code>Int</code>等值类型属性（它们实质上是结构体）；<br><br/></p>
<p>另外，<code>weak</code>修饰的属性必须是 optional 对象类型，否则会报错“’weak’ variable should have optional type ‘xxClass?’”。</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> ani:Animal?<br></code></pre></td></tr></table></figure>

<p>所以，weak 一般用来解决对象间或闭包属性与其所属对象之间的循环引用问题。</p>
<h4 id="3-2-读写"><a href="#3-2-读写" class="headerlink" title="3.2.读写"></a>3.2.读写</h4><p>Swift中没有<code>readwrite</code>和<code>readonly</code>特性。<br><br/></p>
<p>对于<code>存储属性</code>，使用<code>let</code>表明其为只读；使用<code>var</code>表明其为可读／可写。<br><br/></p>
<p>对于<code>计算属性</code>，为其提供一个 getter 方法，使其成为可读的；提供 setter 方法，使其成为可写的。如果只提供了 getter 而没有 setter，则属性只读；计算属性不能只提供 setter 不提供 getter，否则报错“Variable with a setter must also have a getter”。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">var</span> aInt: <span class="hljs-built_in">Int</span> &#123;<br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        &#125;<br>        <span class="hljs-keyword">set</span> &#123;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="3-3-原子性"><a href="#3-3-原子性" class="headerlink" title="3.3.原子性"></a>3.3.原子性</h4><p>OC 中的<code>atomic</code>和<code>nonatomic</code>在 Swift 中没有对应的修饰符，Swift 中属性默认是<code>nonatomic</code>的，可以通过 OC 中类似的锁机制来保证属性对象的线程安全。</p>
<h4 id="3-4-拷贝"><a href="#3-4-拷贝" class="headerlink" title="3.4.拷贝"></a>3.4.拷贝</h4><p>在Swift中，OC的<code>copy</code>被转换为<code>@NSCopying</code>属性。这一类属性须遵守 <code>NSCopying</code>协议。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span>: <span class="hljs-title class_">NSCopying</span> &#123;<br>    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>?<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">copy</span>(<span class="hljs-params">with</span> <span class="hljs-params">zone</span>: <span class="hljs-type">NSZone</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>) -&gt; <span class="hljs-keyword">Any</span> &#123;<br>        <span class="hljs-keyword">let</span> copy <span class="hljs-operator">=</span> <span class="hljs-type">Book</span>()<br>        copy.name <span class="hljs-operator">=</span> name<br>        <span class="hljs-keyword">return</span> copy<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BooksShelf</span> &#123;<br>    <span class="hljs-keyword">@NSCopying</span> <span class="hljs-keyword">var</span> book: <span class="hljs-type">Book</span>?<br>&#125;<br><br><span class="hljs-comment">//调用及日志</span><br><span class="hljs-keyword">let</span> book1 <span class="hljs-operator">=</span> <span class="hljs-type">Book</span>()<br>book1.name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;swift&quot;</span><br><span class="hljs-keyword">let</span> bookShelf <span class="hljs-operator">=</span> <span class="hljs-type">BooksShelf</span>()<br>bookShelf.book <span class="hljs-operator">=</span> book1<br><span class="hljs-built_in">print</span>(bookShelf.book <span class="hljs-operator">===</span> book1)<span class="hljs-comment">//false</span><br></code></pre></td></tr></table></figure>


<h3 id="5-final、static、class"><a href="#5-final、static、class" class="headerlink" title="5.final、static、class"></a>5.final、static、class</h3><h4 id="5-1-final"><a href="#5-1-final" class="headerlink" title="5.1.final"></a>5.1.final</h4><p>修饰类及其元素，强调不能被继承和重写。</p>
<ul>
<li>final 只能修饰类和类中的元素，不能修饰值类型的结构体和枚举，它们本身就不能被继承；</li>
<li>final 修饰的方法、属性、下标不能被重写；</li>
<li>final 修饰整个类时此类不能被继承，其中的元素也将被标记为 final，因此不能重写；</li>
</ul>
<p>#示例：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">var</span> aInt: <span class="hljs-built_in">Int</span>&#123;<br>        <span class="hljs-keyword">get</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        &#125;<br>    &#125;<br>    func callFunction() &#123;<br>        print(<span class="hljs-string">&quot;A&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>:<span class="hljs-type">A</span> &#123; <span class="hljs-comment">// 报错“Inheritance from a final class &#x27;A&#x27;”</span><br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> aInt: <span class="hljs-built_in">Int</span> &#123; <span class="hljs-comment">// 报错“Property overrides a &#x27;final&#x27; property”</span><br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">2</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">override</span> func callFunction() &#123; <span class="hljs-comment">//报错“Instance method overrides a &#x27;final&#x27; instance method”</span><br>        print(<span class="hljs-string">&quot;B&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>final</code>修饰类的属性、方法时只是将其标记为不能重写，并不会将其变成类属性或类方法。</p>
<h4 id="5-2-static"><a href="#5-2-static" class="headerlink" title="5.2.static"></a>5.2.static</h4><p>修饰类中元素，强调属于类、不可重写。</p>
<ul>
<li>static 可以修饰类中的元素，但不能修饰类本身;</li>
<li>static 可以修饰结构体中的元素，但不能修饰结构体本身；</li>
<li>static 不能修饰枚举及其元素；</li>
<li>static 修饰的属性将成为静态属性，修饰的方法将成为静态方法，不能重写，需通过类型名来调用；</li>
</ul>
<p>#示例：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs stylus">class A &#123;<br>    static <span class="hljs-selector-tag">var</span> aInt: Int = <span class="hljs-number">1</span><br>    static func <span class="hljs-built_in">callFunction</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;A.aInt:\(aInt)&quot;</span>)<br>    &#125;<br>&#125;<br>class B:A &#123;<br>    <span class="hljs-selector-tag">var</span> aInt: Int = <span class="hljs-number">2</span> <span class="hljs-comment">// 属性前不能加override 否则会报错“Property does not override any property from its superclass”</span><br><br>    func <span class="hljs-built_in">callFunction</span>() &#123; <span class="hljs-comment">// 方法前不能加override 否则会报错“Method does not override any method from its superclass”</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;B.aInt:\(aInt)&quot;</span>)<br>    &#125;<br>&#125;<br>A<span class="hljs-selector-class">.aInt</span> <span class="hljs-comment">// 1</span><br>B<span class="hljs-selector-class">.aInt</span> <span class="hljs-comment">// 1</span><br>A<span class="hljs-selector-class">.callFunction</span>() <span class="hljs-comment">// A.aInt:1</span><br>let <span class="hljs-selector-tag">b</span> = <span class="hljs-built_in">B</span>()<br><span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.aInt</span> <span class="hljs-comment">// 2</span><br><span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.callFunction</span>()  <span class="hljs-comment">// 打印 B.aInt:2</span><br></code></pre></td></tr></table></figure>

<h4 id="5-3-class"><a href="#5-3-class" class="headerlink" title="5.3.class"></a>5.3.class</h4><p>修饰类中元素，强调属于类、可重写。</p>
<ul>
<li>class 只能用在类中，不能修饰结构体或枚举及它们的元素；</li>
<li>class 修饰的属性和方法，可以被重写；</li>
<li>class 修饰的属性是类属性，修饰的方法是类方法，可以通过“类名.xx”直接调用；</li>
<li>class 可以修饰计算属性，不能修饰存储属性，因为存储属性属于类的实例；</li>
</ul>
<p>#示例：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">var</span> <span class="hljs-title">aInt</span>: <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        &#125;<br>        <span class="hljs-keyword">set</span> &#123;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">func</span> <span class="hljs-title">callFunction</span>() &#123;<br>        print(<span class="hljs-string">&quot;A&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>:<span class="hljs-type">A</span> &#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">var</span> <span class="hljs-title">aInt</span>: <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">2</span><br>        &#125;<br>        <span class="hljs-keyword">set</span> &#123;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">func</span> <span class="hljs-title">callFunction</span>() &#123;<br>        print(<span class="hljs-string">&quot;B&quot;</span>)<br>    &#125;<br>&#125;<br>A.aInt <span class="hljs-comment">// 打印：1</span><br>B.aInt <span class="hljs-comment">// 打印：2</span><br>let b = B()<br>B.callFunction() <span class="hljs-comment">// 打印：B</span><br></code></pre></td></tr></table></figure>

<h3 id="6-访问控制符"><a href="#6-访问控制符" class="headerlink" title="6.访问控制符"></a>6.访问控制符</h3><p>五种访问修饰符，按从高到低排序是：open &gt; public &gt; interal &gt; fileprivate &gt; private。</p>
<ul>
<li>open：可以被任何模块的代码访问，可以被继承和重写。</li>
<li>public: 可以被任何模块的代码访问，模块内是可以被继承和重写，其他模块中不可继承和重写。</li>
<li>internal：内部的意思。默认访问级别，修饰的元素在源代码所在的整个模块都可以访问。</li>
<li>fileprivate：修饰的元素只能在当前文件中访问，当前类的extension中也可以。如果一个文件中含有多个类，这些类中也可以。</li>
<li>private：修饰的元素只能在当前类中访问，当前类的extension中也可以访问。如果当前文件有多个类，这些类中不可以访问。</li>
</ul>
<h3 id="7-typealias"><a href="#7-typealias" class="headerlink" title="7.typealias"></a>7.typealias</h3><p>作用：给已有类型重新定义名称，方便代码阅读。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//eg:1.已有类型的重新命名</span><br>typealias  Address = CGPoint<br><br><span class="hljs-keyword">let</span> point: CGPoint = <span class="hljs-constructor">CGPoint(<span class="hljs-params">x</span>: 0,<span class="hljs-params">y</span>: 0)</span><br><span class="hljs-comment">//等价于</span><br><span class="hljs-keyword">let</span> point: Address = <span class="hljs-constructor">CGPoint(<span class="hljs-params">x</span>: 0,<span class="hljs-params">y</span>: 0)</span><br></code></pre></td></tr></table></figure>

<p>常见应用场景：定义闭包，类似oc的 block 定义。</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livescript">typealias <span class="hljs-function"><span class="hljs-title">successBlock</span> = <span class="hljs-params">(_ code: Int, _ message: <span class="hljs-built_in">String</span>)</span> -&gt;</span> Void<br><span class="hljs-keyword">var</span> callBack: successBlock?<br>self.callBack!(code: <span class="hljs-number">200</span>, message: <span class="hljs-string">&quot;ok&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="8-associatedtype"><a href="#8-associatedtype" class="headerlink" title="8.associatedtype"></a>8.associatedtype</h3><p>协议中不支持<code>&lt;T&gt;</code>这种方式定义泛型，使用<code>associatedtype</code>关键字定义某种泛型，在协议的实现类中才指明此泛型具体是何类型。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-keyword">associatedtype</span> <span class="hljs-type">Item</span>  <span class="hljs-comment">//这个Item就是泛型，可现在协议中用着</span><br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">append</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Item</span>)<br>    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">subscript</span>(<span class="hljs-params">i</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Item</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>实现协议</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">IntStack</span>: <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-comment">// IntStack 类的自有部分</span><br>    <span class="hljs-keyword">var</span> items: [<span class="hljs-type">Int</span>] <span class="hljs-operator">=</span> []<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">push</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Int</span>) &#123;<br>        items.append(item)<br>    &#125;<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">pop</span>() -&gt; <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> items.removeLast()<br>    &#125;<br>    <span class="hljs-comment">// 实现 Container 协议的部分</span><br>    <span class="hljs-keyword">typealias</span> <span class="hljs-type">Item</span> <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>  <span class="hljs-comment">//这里指明Item是Int类型</span><br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">append</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Int</span>) &#123;<br>        <span class="hljs-keyword">self</span>.push(item)<br>    &#125;<br>    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> items.count<br>    &#125;<br>    <span class="hljs-keyword">subscript</span>(<span class="hljs-params">i</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> items[i]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="9-逃逸闭包"><a href="#9-逃逸闭包" class="headerlink" title="9.逃逸闭包"></a>9.逃逸闭包</h3><blockquote>
<p>A closure is said to escape a function when the closure is passed as an argument to the function, but is called after the function returns. When you declare a function that takes a closure as one of its parameters, you can write @escaping before the parameter’s type to indicate that the closure is allowed to escape.</p>
</blockquote>
<p>当闭包作为函数的参数，在函数<code>return</code>之后被调用时，我们就说这个闭包从函数中逃离，即<code>逃逸闭包</code>，使用<code>@escaping</code>来标示。<br><br/></p>
<p>这种情况常见于函数中发起了一个异步请求并把闭包作为异步操作的回调。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// 逃逸闭包示例</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetHelper</span> &#123; <span class="hljs-comment">//网络工具类</span><br>    <br>    <span class="hljs-keyword">var</span> statusOK <span class="hljs-operator">=</span> <span class="hljs-literal">false</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">httpRequest</span>(<span class="hljs-params">withUrl</span> <span class="hljs-params">url</span>:<span class="hljs-type">String</span>,<br>                     <span class="hljs-params">succeesCallback</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Data</span>?,<span class="hljs-type">URLResponse</span>?)-&gt;(),<br>                     <span class="hljs-params">failCallback</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Error</span>?)-&gt;()) &#123;<br>        <span class="hljs-comment">//逃逸闭包必须用@escaping声明;</span><br>        <span class="hljs-comment">//否则编译时报错 Escaping closure captures non-escaping parameter &#x27;succeesCallback&#x27;</span><br>        <span class="hljs-keyword">guard</span> <span class="hljs-operator">!</span>url.isEmpty <span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;+++URL is nil~&quot;</span>)<br>            <span class="hljs-keyword">return</span><br>        &#125;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++task start&quot;</span>)<br>        <span class="hljs-keyword">let</span> urlT:<span class="hljs-type">URL</span>? <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: url)<br>        <span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">URLSession</span>.shared.dataTask(with: urlT<span class="hljs-operator">!</span>) &#123;(data:<span class="hljs-type">Data</span>?, response:<span class="hljs-type">URLResponse</span>?, error:<span class="hljs-type">Error</span>?) <span class="hljs-keyword">in</span><br>            <span class="hljs-keyword">if</span> error <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> &#123;<br>                <span class="hljs-keyword">self</span>.statusOK <span class="hljs-operator">=</span> <span class="hljs-literal">false</span> <span class="hljs-comment">// 逃逸闭包中使用到闭包所在类型时 需要显式的调用self 以便提醒自己捕获了self, 不写编译器会报错!</span><br>                failCallback(error) <span class="hljs-comment">//调用逃逸闭包</span><br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-keyword">self</span>.statusOK <span class="hljs-operator">=</span> <span class="hljs-literal">true</span><br>                succeesCallback(data,response) <span class="hljs-comment">//调用逃逸闭包</span><br>            &#125;<br>        &#125;<br>        task.resume() <span class="hljs-comment">// 开始任务</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">// 发起网络请求</span><br><span class="hljs-keyword">var</span> netHelper <span class="hljs-operator">=</span> <span class="hljs-type">NetHelper</span>()<br>netHelper.httpRequest(withUrl: <span class="hljs-string">&quot;https://www.baidu.com&quot;</span>, succeesCallback: &#123; (data, response) <span class="hljs-keyword">in</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;+++Network finished successfully~<span class="hljs-subst">\n</span> response:<span class="hljs-subst">\(response<span class="hljs-operator">!</span>)</span>&quot;</span>)<br>&#125;) &#123; (error) <span class="hljs-keyword">in</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++++error:<span class="hljs-subst">\(error<span class="hljs-operator">!</span>)</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="10-autoclosure"><a href="#10-autoclosure" class="headerlink" title="10.autoclosure"></a>10.autoclosure</h3><blockquote>
<p>An autoclosure is a closure that’s automatically created to wrap an expression that’s being passed as an argument to a function. It doesn’t take any arguments, and when it’s called, it returns the value of the expression that’s wrapped inside of it. This syntactic convenience lets you omit braces around a function’s parameter by writing a normal expression instead of an explicit closure.</p>
</blockquote>
<p>自动闭包，一种自动创建的闭包，用来把作为函数参数的表达式进行打包。它不接受任何实际参数，当它被调用时，会返回内部打包的表达式的值。这个语法的好处在于通过写普通表达式代替显示闭包，使你省略函数参数的<code>&#123;&#125;</code>括号。它允许你延迟处理，闭包内的代码直到你调用它时才会运行，对于有副作用或者占用资源的代码来说很有作用。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">var</span> customersInLine = <span class="hljs-selector-attr">[<span class="hljs-string">&quot;Chris&quot;</span>, <span class="hljs-string">&quot;Alex&quot;</span>, <span class="hljs-string">&quot;Ewa&quot;</span>, <span class="hljs-string">&quot;Barry&quot;</span>, <span class="hljs-string">&quot;Daniella&quot;</span>]</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(customersInLine.count)</span></span><br><span class="hljs-comment">// 打印结果 &quot;5&quot;</span><br><br><span class="hljs-comment">//1、定义一个block，其类型为()-&gt;String，此时block内的代码尚未执行</span><br>let customerProvider = &#123; customersInLine<span class="hljs-selector-class">.remove</span>(at: <span class="hljs-number">0</span>) &#125; <br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(customersInLine.count)</span></span><br><span class="hljs-comment">// 打印结果 &quot;5&quot;</span><br><br><span class="hljs-comment">//2、调用闭包表达式，真正执行上面定义的block</span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&quot;Now serving \(customerProvider())!&quot;</span>)</span></span><br><span class="hljs-comment">// 打印结果 &quot;Now serving Chris!&quot;</span><br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(customersInLine.count)</span></span><br><span class="hljs-comment">// 打印结果 &quot;4&quot;</span><br></code></pre></td></tr></table></figure>

<p>当你传一个闭包作为参数到函数时，你会得到与延迟处理相同的行为:</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-keyword">var</span> customersInLine = [<span class="hljs-string">&quot;Chris&quot;</span>,<span class="hljs-string">&quot;Alex&quot;</span>,<span class="hljs-string">&quot;Ewa&quot;</span>,<span class="hljs-string">&quot;Barry&quot;</span>,<span class="hljs-string">&quot;Daniella&quot;</span>]<br> <br><span class="hljs-regexp">//定义block，其类型为()-&gt;String，此时尚未执行</span><br><span class="hljs-regexp">let customProvider = &#123;customersInLine.remove(at: 0)&#125;</span><br><span class="hljs-regexp"> </span><br><span class="hljs-regexp"> //</span>定义函数，接受一个<span class="hljs-function"><span class="hljs-params">()</span>-&gt;</span><span class="hljs-built_in">String</span>类型的block作为参数<br>func serve<span class="hljs-function"><span class="hljs-params">(custom customerProvider:() -&gt;<span class="hljs-built_in">String</span>)</span>&#123;</span><br><span class="hljs-function">    <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&quot;Now serving\(customerProvider())!&quot;</span>)</span></span><br><span class="hljs-function">&#125;</span><br><span class="hljs-function"><span class="hljs-title">serve</span><span class="hljs-params">(custom: &#123;customersInLine.remove(at: <span class="hljs-number">0</span>)&#125;)</span></span><br></code></pre></td></tr></table></figure>

<p>@autoclosure将参数标记为使用自动闭包，再调用函数时它就像接受了一个String 参数而非闭包，因为参数被自动地转换为了闭包。</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-keyword">var</span> customersInLine = [<span class="hljs-string">&quot;Chris&quot;</span>,<span class="hljs-string">&quot;Alex&quot;</span>,<span class="hljs-string">&quot;Ewa&quot;</span>,<span class="hljs-string">&quot;Barry&quot;</span>,<span class="hljs-string">&quot;Daniella&quot;</span>]<br> <br><span class="hljs-regexp">//定义闭包</span><br><span class="hljs-regexp">let customProvider = &#123;customersInLine.remove(at: 0)&#125;</span><br><span class="hljs-regexp"> </span><br><span class="hljs-regexp">//</span>将闭包参数标记为@autoclosure<br>func serve<span class="hljs-function"><span class="hljs-params">(custom customerProvider: @autoclosure () -&gt;<span class="hljs-built_in">String</span> )</span>&#123;</span><br><span class="hljs-function">    <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&quot;Now serving \(customerProvider())!&quot;</span>)</span></span><br><span class="hljs-function">&#125;</span><br><span class="hljs-function">//调用函数时，不需要再写花括号&#123;&#125;，@<span class="hljs-title">autoclosure</span>会根据上面的定义，自动将其转换为闭包</span><br><span class="hljs-function"><span class="hljs-title">serve</span><span class="hljs-params">(custom: customersInLine.remove(at: <span class="hljs-number">0</span>))</span></span><br></code></pre></td></tr></table></figure>


<hr>
<p>相关参考：</p>
<p>#<a target="_blank" rel="noopener" href="https://github.com/CocoaChina-editors/Welcome-to-Swift/blob/master/UsingSwiftwithCocoaandObjective-C%E4%B8%AD%E6%96%87%E6%89%8B%E5%86%8C.md">©Swift翻译组</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%8A%80%E6%9C%AF/" class="category-chain-item">技术</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Swift/">#Swift</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Swift 中的常见问题</div>
      <div>http://yoursite.com/2018/09/13/swift-faq.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2018年9月13日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2018/09/14/swift-map.html" title="Swift高阶函数">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Swift高阶函数</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2018/09/02/swift-mixmatch.html" title="Swift 与 OC 的混编">
                        <span class="hidden-mobile">Swift 与 OC 的混编</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://github.com/davidlii" target="_blank" rel="nofollow noopener"><span>Davidlii</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
