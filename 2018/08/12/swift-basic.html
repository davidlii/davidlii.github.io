

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png">
  <link rel="icon" href="/img/avatar.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Davidli">
  <meta name="keywords" content="Davidli">
  
    <meta name="description" content="1.String String.Index  表示字符在字符串中的位置： 1234567891011121314151617let greeting &#x3D; &quot;Guten Tag!&quot;greeting[greeting.startIndex]&#x2F;&#x2F; Ggreeting[greeting.index(before: greeting.endIndex)]&#x2F;&#x2F; !greeting[gre">
<meta property="og:type" content="article">
<meta property="og:title" content="Swift一览">
<meta property="og:url" content="https://davidlii.cn/2018/08/12/swift-basic.html">
<meta property="og:site_name" content="Davidli">
<meta property="og:description" content="1.String String.Index  表示字符在字符串中的位置： 1234567891011121314151617let greeting &#x3D; &quot;Guten Tag!&quot;greeting[greeting.startIndex]&#x2F;&#x2F; Ggreeting[greeting.index(before: greeting.endIndex)]&#x2F;&#x2F; !greeting[gre">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://davidlii.nos-eastchina1.126.net/pic_swift.png">
<meta property="article:published_time" content="2018-08-12T14:58:04.000Z">
<meta property="article:modified_time" content="2019-06-21T14:16:04.000Z">
<meta property="article:author" content="Davidli">
<meta property="article:tag" content="Swift">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://davidlii.nos-eastchina1.126.net/pic_swift.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Swift一览 - Davidli</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"davidlii.cn","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>嵇风</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Swift一览"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2018-08-12 22:58" pubdate>
          2018年8月12日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          38k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          319 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Swift一览</h1>
            
            
              <div class="markdown-body">
                
                <p><img src="https://davidlii.nos-eastchina1.126.net/pic_swift5_outline.png" srcset="/img/loading.gif" lazyload alt="Swift5一览"></p>
<h3 id="1-String"><a href="#1-String" class="headerlink" title="1.String"></a>1.String</h3><ul>
<li><code>String.Index</code></li>
</ul>
<p>表示字符在字符串中的位置：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> greeting <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Guten Tag!&quot;</span><br>greeting[greeting.startIndex]<br><span class="hljs-comment">// G</span><br>greeting[greeting.index(before: greeting.endIndex)]<br><span class="hljs-comment">// !</span><br>greeting[greeting.index(after: greeting.startIndex)]<br><span class="hljs-comment">// u</span><br><span class="hljs-keyword">let</span> index <span class="hljs-operator">=</span> greeting.index(greeting.startIndex, offsetBy: <span class="hljs-number">7</span>)<br>greeting[index]<br><span class="hljs-comment">// a</span><br>greeting[greeting.endIndex] <span class="hljs-comment">// 报错：越界</span><br>greeting.index(after: greeting.endIndex) <span class="hljs-comment">// 报错：越界</span><br><br><span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> greeting.indices &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(greeting[index])</span> &quot;</span>, terminator: <span class="hljs-string">&quot;&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;G u t e n   T a g ! &quot;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>增删字符</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-comment">//增</span><br><span class="hljs-keyword">var</span> welcome <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><br>welcome.insert(<span class="hljs-string">&quot;!&quot;</span>, at: welcome.endIndex)<br><span class="hljs-comment">// welcome now equals &quot;hello!&quot;</span><br>welcome.insert(contentsOf: <span class="hljs-string">&quot; there&quot;</span>, at: welcome.index(before: welcome.endIndex))<br><span class="hljs-comment">// welcome now equals &quot;hello there!&quot;</span><br><br><span class="hljs-comment">//删</span><br>welcome.remove(at: welcome.index(before: welcome.endIndex))<br><span class="hljs-comment">// welcome now equals &quot;hello there&quot;</span><br><span class="hljs-keyword">let</span> range <span class="hljs-operator">=</span> welcome.index(welcome.endIndex, offsetBy: <span class="hljs-operator">-</span><span class="hljs-number">6</span>)<span class="hljs-operator">..&lt;</span>welcome.endIndex<br>welcome.removeSubrange(range)<br><span class="hljs-comment">// welcome now equals &quot;hello&quot;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>截取</li>
</ul>
<p>截取字符串时返回的是<code>Substring</code>类型：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> greeting <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello, world!&quot;</span><br><span class="hljs-keyword">let</span> index <span class="hljs-operator">=</span> greeting.firstIndex(of: <span class="hljs-string">&quot;,&quot;</span>) <span class="hljs-operator">??</span> greeting.endIndex<br><span class="hljs-keyword">let</span> beginning <span class="hljs-operator">=</span> greeting[<span class="hljs-operator">..&lt;</span>index]<br><span class="hljs-comment">// beginning is &quot;Hello&quot;</span><br><br><span class="hljs-comment">// Convert the result to a String for long-term storage.</span><br><span class="hljs-keyword">let</span> newString <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(beginning)<br></code></pre></td></tr></table></figure>

<h3 id="2-集合"><a href="#2-集合" class="headerlink" title="2.集合"></a>2.集合</h3><h4 id="1-Array"><a href="#1-Array" class="headerlink" title="1.Array"></a>1.Array</h4><p><code>Array&lt;Element&gt;</code>表示数组的类型，简写作：<code>[Element]</code>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> someInts: [<span class="hljs-type">Int</span>] <span class="hljs-operator">=</span> []<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;someInts is of type [Int] with <span class="hljs-subst">\(someInts.count)</span> items.&quot;</span>)<br><span class="hljs-comment">// Prints &quot;someInts is of type [Int] with 0 items.&quot;</span><br>someInts.append(<span class="hljs-number">3</span>)<br><span class="hljs-comment">// someInts now contains 1 value of type Int</span><br></code></pre></td></tr></table></figure>

<p>数组的操作：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> shoppingList <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;Eggs&quot;</span>, <span class="hljs-string">&quot;Milk&quot;</span>]<br><span class="hljs-keyword">if</span> shoppingList.isEmpty &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The shopping list is empty.&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The shopping list isn&#x27;t empty.&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;The shopping list isn&#x27;t empty.&quot;</span><br><br><span class="hljs-comment">// 增</span><br>shoppingList.append(<span class="hljs-string">&quot;Flour&quot;</span>)<br><span class="hljs-comment">// shoppingList now contains 3 items, and someone is making pancakes</span><br>shoppingList <span class="hljs-operator">+=</span> [<span class="hljs-string">&quot;Baking Powder&quot;</span>]<br><span class="hljs-comment">// shoppingList now contains 4 items</span><br>shoppingList <span class="hljs-operator">+=</span> [<span class="hljs-string">&quot;Chocolate Spread&quot;</span>, <span class="hljs-string">&quot;Cheese&quot;</span>, <span class="hljs-string">&quot;Butter&quot;</span>]<br><span class="hljs-comment">// shoppingList now contains 7 items</span><br><br><span class="hljs-comment">// 读</span><br><span class="hljs-keyword">var</span> firstItem <span class="hljs-operator">=</span> shoppingList[<span class="hljs-number">0</span>]<br><span class="hljs-comment">// firstItem is equal to &quot;Eggs&quot;</span><br><span class="hljs-comment">// 修改指定索引处的元素</span><br>shoppingList[<span class="hljs-number">0</span>] <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Six eggs&quot;</span><br><span class="hljs-comment">// the first item in the list is now equal to &quot;Six eggs&quot; rather than &quot;Eggs&quot;</span><br>shoppingList[<span class="hljs-number">4</span><span class="hljs-operator">...</span><span class="hljs-number">6</span>] <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;Bananas&quot;</span>, <span class="hljs-string">&quot;Apples&quot;</span>]<br><span class="hljs-comment">// shoppingList now contains 6 items</span><br><br><span class="hljs-comment">// 插入</span><br>shoppingList.insert(<span class="hljs-string">&quot;Maple Syrup&quot;</span>, at: <span class="hljs-number">0</span>)<br><span class="hljs-comment">// shoppingList now contains 7 items</span><br><span class="hljs-comment">// &quot;Maple Syrup&quot; is now the first item in the list</span><br><br><span class="hljs-comment">// 删除</span><br><span class="hljs-keyword">let</span> mapleSyrup <span class="hljs-operator">=</span> shoppingList.remove(at: <span class="hljs-number">0</span>)<br><span class="hljs-comment">// the item that was at index 0 has just been removed</span><br><span class="hljs-comment">// shoppingList now contains 6 items, and no Maple Syrup</span><br><span class="hljs-comment">// the mapleSyrup constant is now equal to the removed &quot;Maple Syrup&quot; string</span><br><br><span class="hljs-comment">// 遍历</span><br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> shoppingList &#123;<br>    <span class="hljs-built_in">print</span>(item)<br>&#125;<br><span class="hljs-keyword">for</span> (index, value) <span class="hljs-keyword">in</span> shoppingList.enumerated() &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Item <span class="hljs-subst">\(index <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)</span>: <span class="hljs-subst">\(value)</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2-Set"><a href="#2-Set" class="headerlink" title="2.Set"></a>2.Set</h4><p><code>Set</code>是无序集合。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> letters <span class="hljs-operator">=</span> <span class="hljs-type">Set</span>&lt;<span class="hljs-type">Character</span>&gt;()<br><br><span class="hljs-comment">// 增</span><br>letters.insert(<span class="hljs-string">&quot;a&quot;</span>)<br><span class="hljs-comment">// letters now contains 1 value of type Character</span><br><span class="hljs-comment">// 置空</span><br>letters <span class="hljs-operator">=</span> []<br><span class="hljs-comment">// letters is now an empty set, but is still of type Set&lt;Character&gt;</span><br><br><span class="hljs-comment">// 字面量赋值</span><br><span class="hljs-keyword">var</span> favoriteGenres: <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;Rock&quot;</span>, <span class="hljs-string">&quot;Classical&quot;</span>, <span class="hljs-string">&quot;Hip hop&quot;</span>]<br><span class="hljs-comment">// 简写</span><br>favoriteGenres: <span class="hljs-type">Set</span> <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;Rock&quot;</span>, <span class="hljs-string">&quot;Classical&quot;</span>, <span class="hljs-string">&quot;Hip hop&quot;</span>]<br></code></pre></td></tr></table></figure>

<p><code>Set</code>的操作：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> favoriteGenres: <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;Rock&quot;</span>, <span class="hljs-string">&quot;Classical&quot;</span>, <span class="hljs-string">&quot;Hip hop&quot;</span>]<br>favoriteGenres.insert(<span class="hljs-string">&quot;Jazz&quot;</span>)<br><span class="hljs-comment">// favoriteGenres now contains 4 items</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> removedGenre <span class="hljs-operator">=</span> favoriteGenres.remove(<span class="hljs-string">&quot;Rock&quot;</span>) &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(removedGenre)</span>? I&#x27;m over it.&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I never much cared for that.&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;Rock? I&#x27;m over it.&quot;</span><br><span class="hljs-keyword">if</span> favoriteGenres.contains(<span class="hljs-string">&quot;Funk&quot;</span>) &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I get up on the good foot.&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;It&#x27;s too funky in here.&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;It&#x27;s too funky in here.&quot;</span><br><br><span class="hljs-comment">// 遍历</span><br><span class="hljs-keyword">for</span> genre <span class="hljs-keyword">in</span> favoriteGenres &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(genre)</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="3-Dictionary"><a href="#3-Dictionary" class="headerlink" title="3.Dictionary"></a>3.Dictionary</h4><p><code>Dictionary&lt;Key, Value&gt;</code>表示字典的类型，简写作：<code>[Key: Value]</code>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-comment">// 创建空字典</span><br><span class="hljs-keyword">var</span> namesOfIntegers: [<span class="hljs-type">Int</span>: <span class="hljs-type">String</span>] <span class="hljs-operator">=</span> [:]<br>namesOfIntegers[<span class="hljs-number">16</span>] <span class="hljs-operator">=</span> <span class="hljs-string">&quot;sixteen&quot;</span><br>namesOfIntegers <span class="hljs-operator">=</span> [:]<br><br><span class="hljs-comment">// 创建字典并赋值</span><br><span class="hljs-keyword">var</span> airports: [<span class="hljs-type">String</span>: <span class="hljs-type">String</span>] <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;YYZ&quot;</span>: <span class="hljs-string">&quot;Toronto Pearson&quot;</span>, <span class="hljs-string">&quot;DUB&quot;</span>: <span class="hljs-string">&quot;Dublin&quot;</span>]<br><span class="hljs-comment">// 简写形式</span><br><span class="hljs-keyword">var</span> airports <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;YYZ&quot;</span>: <span class="hljs-string">&quot;Toronto Pearson&quot;</span>, <span class="hljs-string">&quot;DUB&quot;</span>: <span class="hljs-string">&quot;Dublin&quot;</span>]<br></code></pre></td></tr></table></figure>

<p>字典的操作：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-comment">// 更新</span><br>airports[<span class="hljs-string">&quot;LHR&quot;</span>] <span class="hljs-operator">=</span> <span class="hljs-string">&quot;London Heathrow&quot;</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> oldValue <span class="hljs-operator">=</span> airports.updateValue(<span class="hljs-string">&quot;Dublin Airport&quot;</span>, forKey: <span class="hljs-string">&quot;DUB&quot;</span>) &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The old value for DUB was <span class="hljs-subst">\(oldValue)</span>.&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;The old value for DUB was Dublin.&quot;</span><br><br><span class="hljs-comment">// 取值</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> airportName <span class="hljs-operator">=</span> airports[<span class="hljs-string">&quot;DUB&quot;</span>] &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The name of the airport is <span class="hljs-subst">\(airportName)</span>.&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;That airport isn&#x27;t in the airports dictionary.&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;The name of the airport is Dublin Airport.&quot;</span><br><br><span class="hljs-comment">// 删除</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> removedValue <span class="hljs-operator">=</span> airports.removeValue(forKey: <span class="hljs-string">&quot;DUB&quot;</span>) &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The removed airport&#x27;s name is <span class="hljs-subst">\(removedValue)</span>.&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The airports dictionary doesn&#x27;t contain a value for DUB.&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;The removed airport&#x27;s name is Dublin Airport.&quot;</span><br><br><span class="hljs-comment">// 遍历字典</span><br><span class="hljs-keyword">for</span> (airportCode, airportName) <span class="hljs-keyword">in</span> airports &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(airportCode)</span>: <span class="hljs-subst">\(airportName)</span>&quot;</span>)<br>&#125;<br><span class="hljs-comment">// 遍历键</span><br><span class="hljs-keyword">for</span> airportCode <span class="hljs-keyword">in</span> airports.keys &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Airport code: <span class="hljs-subst">\(airportCode)</span>&quot;</span>)<br>&#125;<br><span class="hljs-comment">// 遍历值</span><br><span class="hljs-keyword">for</span> airportName <span class="hljs-keyword">in</span> airports.values &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Airport name: <span class="hljs-subst">\(airportName)</span>&quot;</span>)<br>&#125;<br><span class="hljs-comment">// 取所有键</span><br><span class="hljs-keyword">let</span> airportCodes <span class="hljs-operator">=</span> [<span class="hljs-type">String</span>](airports.keys)<br><span class="hljs-comment">// 取所有值</span><br><span class="hljs-keyword">let</span> airportNames <span class="hljs-operator">=</span> [<span class="hljs-type">String</span>](airports.values)<br></code></pre></td></tr></table></figure>

<h3 id="3-枚举"><a href="#3-枚举" class="headerlink" title="3.枚举"></a>3.枚举</h3><p>定义和使用：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CompassPoint</span> &#123;<br>    <span class="hljs-keyword">case</span> north<br>    <span class="hljs-keyword">case</span> south<br>    <span class="hljs-keyword">case</span> east<br>    <span class="hljs-keyword">case</span> west<br>&#125;<br><br><span class="hljs-keyword">var</span> directionToHead <span class="hljs-operator">=</span> <span class="hljs-type">CompassPoint</span>.west<br>directionToHead <span class="hljs-operator">=</span> .east<br><br>directionToHead <span class="hljs-operator">=</span> .south<br><span class="hljs-keyword">switch</span> directionToHead &#123;<br><span class="hljs-keyword">case</span> .north:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Lots of planets have a north&quot;</span>)<br><span class="hljs-keyword">case</span> .south:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Watch out for penguins&quot;</span>)<br><span class="hljs-keyword">case</span> .east:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Where the sun rises&quot;</span>)<br><span class="hljs-keyword">case</span> .west:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Where the skies are blue&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;Watch out for penguins&quot;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>遍历枚举</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Beverage</span>: <span class="hljs-title class_">CaseIterable</span> &#123;<br>    <span class="hljs-keyword">case</span> coffee, tea, juice<br>&#125;<br><span class="hljs-keyword">let</span> numberOfChoices <span class="hljs-operator">=</span> <span class="hljs-type">Beverage</span>.allCases.count<br><span class="hljs-comment">// 遍历</span><br><span class="hljs-keyword">for</span> beverage <span class="hljs-keyword">in</span> <span class="hljs-type">Beverage</span>.allCases &#123;<br>    <span class="hljs-built_in">print</span>(beverage)<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>原始值</li>
</ul>
<p>原始值可以是字符串、字符、或者任何整型值或浮点型值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Rank</span>: <span class="hljs-title class_">Int</span> &#123; <span class="hljs-comment">// 默认从0开始，往后递增。</span><br>    <span class="hljs-keyword">case</span> ace <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 自定义case对应的值</span><br>    <span class="hljs-keyword">case</span> two, three, four, five, six, seven, eight, nine, ten<br>    <span class="hljs-keyword">case</span> jack, queen, king<br>&#125;<br><span class="hljs-keyword">let</span> ace <span class="hljs-operator">=</span> <span class="hljs-type">Rank</span>.ace<br><span class="hljs-keyword">let</span> aceRawValue <span class="hljs-operator">=</span> ace.rawValue<br></code></pre></td></tr></table></figure>

<p><code>Int</code>类型的枚举默认从0开始，往后递增。手动指定某个case的值后，其后面的枚举值也是递增。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CompassPoint</span>: <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-keyword">case</span> north, south, east, west<br>&#125;<br><span class="hljs-keyword">let</span> direction <span class="hljs-operator">=</span> <span class="hljs-type">CompassPoint</span>.north.rawValue <span class="hljs-comment">// &quot;north&quot;</span><br><span class="hljs-keyword">let</span> south <span class="hljs-operator">=</span> <span class="hljs-type">CompassPoint</span>(rawValue: <span class="hljs-string">&quot;south&quot;</span>) <span class="hljs-comment">// &quot;south&quot;</span><br></code></pre></td></tr></table></figure>
<p><code>CompassPoint.south</code>隐式的原始值是字符串”south”。</p>
<ul>
<li>相关值</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">ServerResponse</span> &#123;<br>    <span class="hljs-keyword">case</span> result(<span class="hljs-type">String</span>, <span class="hljs-type">String</span>)<br>    <span class="hljs-keyword">case</span> failure(<span class="hljs-type">String</span>)<br>&#125;<br><span class="hljs-keyword">let</span> success <span class="hljs-operator">=</span> <span class="hljs-type">ServerResponse</span>.result(<span class="hljs-string">&quot;6:00 am&quot;</span>, <span class="hljs-string">&quot;8:09 pm&quot;</span>)<br><span class="hljs-keyword">let</span> failure <span class="hljs-operator">=</span> <span class="hljs-type">ServerResponse</span>.failure(<span class="hljs-string">&quot;Out of cheese.&quot;</span>)<br><br><span class="hljs-keyword">switch</span> success &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> .result(sunrise, sunset):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Sunrise is at <span class="hljs-subst">\(sunrise)</span> and sunset is at <span class="hljs-subst">\(sunset)</span>.&quot;</span>)<br><span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> .failure(message):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Failure...  <span class="hljs-subst">\(message)</span>&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;Sunrise is at 6:00 am and sunset is at 8:09 pm.&quot;</span><br></code></pre></td></tr></table></figure>

<h3 id="4-属性"><a href="#4-属性" class="headerlink" title="4.属性"></a>4.属性</h3><h4 id="4-1-存储属性"><a href="#4-1-存储属性" class="headerlink" title="4.1.存储属性"></a>4.1.存储属性</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Number</span><br>&#123;<br>   <span class="hljs-keyword">var</span> digits: <span class="hljs-type">Int</span><br>   <span class="hljs-keyword">let</span> pi <span class="hljs-operator">=</span> <span class="hljs-number">3.1415</span><br>&#125;<br><br><span class="hljs-keyword">var</span> n <span class="hljs-operator">=</span> <span class="hljs-type">Number</span>(digits: <span class="hljs-number">12345</span>)<br>n.digits <span class="hljs-operator">=</span> <span class="hljs-number">67</span><br>n.pi <span class="hljs-operator">=</span> <span class="hljs-number">3.1</span> <span class="hljs-comment">// 报错，pi是常量，不能修改</span><br></code></pre></td></tr></table></figure>

<h4 id="4-2-计算属性"><a href="#4-2-计算属性" class="headerlink" title="4.2.计算属性"></a>4.2.计算属性</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TextBool</span> &#123;<br>    <span class="hljs-comment">// 1.存储属性</span><br>    <span class="hljs-keyword">var</span> aInt:<span class="hljs-type">Int</span><br>    <span class="hljs-comment">// 2.计算属性</span><br>    <span class="hljs-keyword">var</span> text:<span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">if</span> aInt <span class="hljs-operator">==</span> <span class="hljs-number">1</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;true&quot;</span><br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;false&quot;</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">set</span> &#123;<br>            <span class="hljs-keyword">if</span> newValue <span class="hljs-operator">==</span> <span class="hljs-string">&quot;true&quot;</span> &#123;<br>                aInt <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                aInt <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">var</span> aBool <span class="hljs-operator">=</span> <span class="hljs-type">TextBool</span>(aInt: <span class="hljs-number">0</span>)<br>aBool.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;true&quot;</span><br><span class="hljs-built_in">print</span>(aBool.aInt) <span class="hljs-comment">// 打印：&quot;1&quot;</span><br></code></pre></td></tr></table></figure>

<p>只有<code>get</code>没有<code>set</code>的计算属性就是只读属性。</p>
<h4 id="4-3-观察器"><a href="#4-3-观察器" class="headerlink" title="4.3.观察器"></a>4.3.观察器</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TextBool</span> &#123;<br>    <span class="hljs-comment">// 存储属性</span><br>    <span class="hljs-keyword">var</span> aInt:<span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-comment">// 属性观察器</span><br>        <span class="hljs-keyword">willSet</span> &#123;<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;willSet:<span class="hljs-subst">\(newValue)</span>&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">didSet</span>&#123;<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;didSet:<span class="hljs-subst">\(oldValue)</span>&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">var</span> aBool <span class="hljs-operator">=</span> <span class="hljs-type">TextBool</span>(aInt: <span class="hljs-number">0</span>)<br>aBool.aInt <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<p>打印日志：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">willSet</span>:<span class="hljs-number">1</span><br><span class="hljs-attribute">didSet</span>:<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<p>观察器在属性初始化过程中不会被调用。</p>
<h4 id="4-4-延迟存储属性"><a href="#4-4-延迟存储属性" class="headerlink" title="4.4.延迟存储属性"></a>4.4.延迟存储属性</h4><p>第一次被调用时才会计算其初始值的属性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TextBool</span> &#123;<br>    <span class="hljs-keyword">init</span>()&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Init TextBool&quot;</span>)<br>        aInt <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">// 存储属性</span><br>    <span class="hljs-keyword">var</span> aInt:<span class="hljs-type">Int</span><br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Number</span><br>&#123;<br>    <span class="hljs-keyword">var</span> digits: <span class="hljs-type">Int</span><br>    <span class="hljs-keyword">let</span> pi <span class="hljs-operator">=</span> <span class="hljs-number">3.1415</span><br>    <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">var</span> aBool <span class="hljs-operator">=</span> <span class="hljs-type">TextBool</span>() <span class="hljs-comment">//延迟属性</span><br>&#125;<br><br><span class="hljs-keyword">var</span> n <span class="hljs-operator">=</span> <span class="hljs-type">Number</span>(digits: <span class="hljs-number">1</span>)<br>n.digits <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(n.digits)</span>&quot;</span>)<br><span class="hljs-built_in">print</span>(n.aBool)<br></code></pre></td></tr></table></figure>
<p>打印日志：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">2</span><br>Init TextBool<br><span class="hljs-function"><span class="hljs-title">TextBool</span><span class="hljs-params">(aInt: <span class="hljs-number">0</span>)</span></span><br></code></pre></td></tr></table></figure>
<p>创建<code>aBool</code>实例实会先执行其<code>init()</code>函数并打印日志，而日志中<code>2</code>先于<code>Init TextBool</code>打印，说明创建<code>n</code>实例后并未立即创建<code>aBool</code>实例。只有调用<code>print(n.aBool)</code>时第一次访问了<code>aBool</code>实例，此时<code>aBool</code>才真正被初始化。</p>
<h4 id="4-5-包装器"><a href="#4-5-包装器" class="headerlink" title="4.5.包装器"></a>4.5.包装器</h4><p>作用：将属性的定义和管理代码封装在一起。它可以让我们抽象出属性的某些行为，比如线程安全性、延迟初始化等。当需要给多个属性定义同样的行为时，使用包装器可以省去大量重复代码，让我们的代码更加简洁和易于理解。</p>
<p>示例1：属性值不能 &gt; 12</p>
<ul>
<li>定义包装器</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">@propertyWrapper</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TwelveOrLess</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> number <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">var</span> wrappedValue: <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">get</span> &#123; <span class="hljs-keyword">return</span> number &#125;<br>        <span class="hljs-keyword">set</span> &#123; number <span class="hljs-operator">=</span> <span class="hljs-built_in">min</span>(newValue, <span class="hljs-number">12</span>) &#125; <span class="hljs-comment">// 属性值不能&gt;12</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>属性封装器中必须声明一个<code>wrappedvalue</code>属性，用来表示真正待封装属性。待封装属性可能是height，也可能是width，但在封装器中均用<code>wrappedvalue</code>来表示。</p>
<ul>
<li>使用包装器</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SmallRectangle</span> &#123;<br>    <span class="hljs-meta">@TwelveOrLess</span> <span class="hljs-keyword">var</span> height: <span class="hljs-type">Int</span><br>    <span class="hljs-meta">@TwelveOrLess</span> <span class="hljs-keyword">var</span> width: <span class="hljs-type">Int</span><br>&#125;<br><br><span class="hljs-keyword">var</span> rectangle <span class="hljs-operator">=</span> <span class="hljs-type">SmallRectangle</span>()<br><span class="hljs-built_in">print</span>(rectangle.height)<br><span class="hljs-comment">// Prints &quot;0&quot;</span><br><br>rectangle.height <span class="hljs-operator">=</span> <span class="hljs-number">10</span><br><span class="hljs-built_in">print</span>(rectangle.height)<br><span class="hljs-comment">// Prints &quot;10&quot;</span><br><br>rectangle.height <span class="hljs-operator">=</span> <span class="hljs-number">24</span><br><span class="hljs-built_in">print</span>(rectangle.height)<br><span class="hljs-comment">// Prints &quot;12&quot; // 24大于12，所以取二者中的最小值12</span><br></code></pre></td></tr></table></figure>

<p>使用时以@+封装器的名字修饰变量；编译器会按照上面的定义，自动合成此属性的setter 和 getter，因此我们省去了这部分任务，这正是属性封装器的精髓，尤其是类似的属性很多时，这个语法糖的优势很明显。</p>
<p>示例2：属性值发生变化时页面同步更新</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>: <span class="hljs-title class_">ObservableObject</span> &#123;<br>   <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span><br>   <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> &#123;<br>   <span class="hljs-meta">@ObservedObject</span> <span class="hljs-keyword">var</span> user: <span class="hljs-type">User</span><br>​<br>   <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> &#123;<br>       <span class="hljs-type">Text</span>(<span class="hljs-string">&quot;Hello, <span class="hljs-subst">\(user.name)</span>!&quot;</span>)<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>这是SwiftUI中的<code>@Published</code>与<code>@ObservedObject</code>，它们也都是属性包装器。</p>
<p>当<code>user.name</code>的值发生变化时，ContentView 会自动更新，显示新的名字。</p>
<h4 id="4-6-修饰符"><a href="#4-6-修饰符" class="headerlink" title="4.6.修饰符"></a>4.6.修饰符</h4><h5 id="1-强弱"><a href="#1-强弱" class="headerlink" title="1.强弱"></a>1.强弱</h5><p>Swift 里属性默认是强类型的，OC 中<code>strong</code>属性在 Swift 中会转换为<code>存储属性</code>。</p>
<p>Swift 中<code>weak</code>对应 OC 中的<code>weak</code>，仅能修饰引用类型，不能修饰<code>String</code>、<code>Int</code>等值类型属性；</p>
<p><code>weak</code>修饰的属性必须是 optional 对象类型，否则会报错“’weak’ variable should have optional type ‘xxClass?’”。</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> ani:Animal?<br></code></pre></td></tr></table></figure>
<p>weak 一般用来解决对象间或闭包属性与其所属对象之间的循环引用问题。</p>
<h5 id="2-读写"><a href="#2-读写" class="headerlink" title="2.读写"></a>2.读写</h5><p>Swift 没有 OC 中的<code>readwrite</code>和<code>readonly</code>关键字。</p>
<p>对于<code>存储属性</code>，使用<code>let</code>表明只读；使用<code>var</code>表明可读／可写。</p>
<p>对于<code>计算属性</code>，提供一个 getter 使其可读，提供 setter 使其可写；只有 getter 没有 setter，则属性只读；计算属性不能只提供 setter 不提供 getter，否则会报错。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">var</span> aInt: <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        &#125;<br>        <span class="hljs-keyword">set</span> &#123;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="3-原子性"><a href="#3-原子性" class="headerlink" title="3.原子性"></a>3.原子性</h5><p>OC 中的<code>atomic</code>和<code>nonatomic</code>在 Swift 中没有对应的修饰符，Swift 中属性默认是<code>nonatomic</code>的，可以通过 OC 中类似的锁机制来保证属性对象的线程安全。</p>
<h5 id="4-拷贝"><a href="#4-拷贝" class="headerlink" title="4.拷贝"></a>4.拷贝</h5><p>在Swift中，OC的<code>copy</code>被转换为<code>@NSCopying</code>属性。这一类属性须遵守 <code>NSCopying</code>协议。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span>: <span class="hljs-title class_">NSCopying</span> &#123;<br>    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>?<br>    <span class="hljs-comment">// 实现copy协议方法</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">copy</span>(<span class="hljs-params">with</span> <span class="hljs-params">zone</span>: <span class="hljs-type">NSZone</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>) -&gt; <span class="hljs-keyword">Any</span> &#123;<br>        <span class="hljs-keyword">let</span> copy <span class="hljs-operator">=</span> <span class="hljs-type">Book</span>()<br>        copy.name <span class="hljs-operator">=</span> name<br>        <span class="hljs-keyword">return</span> copy<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BooksShelf</span> &#123;<br>    <span class="hljs-keyword">@NSCopying</span> <span class="hljs-keyword">var</span> book: <span class="hljs-type">Book</span>?<br>&#125;<br><br><span class="hljs-comment">//调用及日志</span><br><span class="hljs-keyword">let</span> book1 <span class="hljs-operator">=</span> <span class="hljs-type">Book</span>()<br>book1.name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;swift&quot;</span><br><span class="hljs-keyword">let</span> bookShelf <span class="hljs-operator">=</span> <span class="hljs-type">BooksShelf</span>()<br>bookShelf.book <span class="hljs-operator">=</span> book1<br><span class="hljs-built_in">print</span>(bookShelf.book <span class="hljs-operator">===</span> book1)<span class="hljs-comment">//false</span><br></code></pre></td></tr></table></figure>

<h3 id="5-控制流"><a href="#5-控制流" class="headerlink" title="5.控制流"></a>5.控制流</h3><h4 id="1-if-else"><a href="#1-if-else" class="headerlink" title="1.if else"></a>1.if else</h4><ul>
<li>1.一般用法：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> individualScores <span class="hljs-operator">=</span> [<span class="hljs-number">75</span>, <span class="hljs-number">43</span>, <span class="hljs-number">103</span>, <span class="hljs-number">87</span>, <span class="hljs-number">12</span>]<br><span class="hljs-keyword">var</span> teamScore <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> score <span class="hljs-keyword">in</span> individualScores &#123;<br>    <span class="hljs-keyword">if</span> score <span class="hljs-operator">&gt;</span> <span class="hljs-number">50</span> &#123;<br>        teamScore <span class="hljs-operator">+=</span> <span class="hljs-number">3</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        teamScore <span class="hljs-operator">+=</span> <span class="hljs-number">1</span><br>    &#125;<br>&#125;<br><span class="hljs-built_in">print</span>(teamScore)<br><span class="hljs-comment">// Prints &quot;11&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>2.变量赋值：</li>
</ul>
<p>可以在<code>=</code>号之后使用<code>if</code>或<code>switch</code>语句根据条件取变量的值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> scoreDecoration <span class="hljs-operator">=</span> <span class="hljs-keyword">if</span> teamScore <span class="hljs-operator">&gt;</span> <span class="hljs-number">10</span> &#123;<br>    <span class="hljs-string">&quot;🎉&quot;</span> <span class="hljs-comment">//省略了return</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-string">&quot;&quot;</span><br>&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Score:&quot;</span>, teamScore, scoreDecoration)<br><span class="hljs-comment">// Prints &quot;Score: 11 🎉&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>3.可选绑定</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> optionalString: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello&quot;</span><br><span class="hljs-built_in">print</span>(optionalString <span class="hljs-operator">==</span> <span class="hljs-literal">nil</span>)<br><span class="hljs-comment">// Prints &quot;false&quot;</span><br><br><span class="hljs-keyword">var</span> optionalName: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-string">&quot;John Appleseed&quot;</span><br><span class="hljs-keyword">var</span> greeting <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello!&quot;</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> optionalName &#123; <span class="hljs-comment">//不为nil时 值绑定到常量name上</span><br>    greeting <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello, <span class="hljs-subst">\(name)</span>&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>可选绑定的简写用法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> nickname &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hey, <span class="hljs-subst">\(nickname)</span>&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Doesn&#x27;t print anything, because nickname is nil.</span><br></code></pre></td></tr></table></figure>

<h4 id="2-switch"><a href="#2-switch" class="headerlink" title="2.switch"></a>2.switch</h4><p><code>case</code>中支持任何数据类型。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> someCharacter: <span class="hljs-type">Character</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;z&quot;</span><br><span class="hljs-keyword">switch</span> someCharacter &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;a&quot;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The first letter of the Latin alphabet&quot;</span>)<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;z&quot;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The last letter of the Latin alphabet&quot;</span>)<br><span class="hljs-keyword">default</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Some other character&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;The last letter of the Latin alphabet&quot;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>fallthrough</li>
</ul>
<p>匹配成功后不需要手动书写<code>break</code>，会自动退出当前控制流。</p>
<p><code>fallthrough</code>可以让<code>case</code>之后的语句按顺序继续运行，且不论条件是否满足都会执行：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> index <span class="hljs-operator">=</span> <span class="hljs-number">10</span><br><br><span class="hljs-keyword">switch</span> index &#123;<br>   <span class="hljs-keyword">case</span> <span class="hljs-number">100</span>  :<br>      <span class="hljs-built_in">print</span>( <span class="hljs-string">&quot;index 的值为 100&quot;</span>)<br>      <span class="hljs-keyword">fallthrough</span><br>   <span class="hljs-keyword">case</span> <span class="hljs-number">10</span>,<span class="hljs-number">15</span>  :<br>      <span class="hljs-built_in">print</span>( <span class="hljs-string">&quot;index 的值为 10 或 15&quot;</span>)<br>      <span class="hljs-keyword">fallthrough</span><br>   <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>  :<br>      <span class="hljs-built_in">print</span>( <span class="hljs-string">&quot;index 的值为 5&quot;</span>)<br>   <span class="hljs-keyword">default</span> :<br>      <span class="hljs-built_in">print</span>( <span class="hljs-string">&quot;默认 case&quot;</span>)<br>&#125;<br><span class="hljs-comment">// 输出日志：</span><br><span class="hljs-comment">// index 的值为 10 或 15</span><br><span class="hljs-comment">// index 的值为 5</span><br></code></pre></td></tr></table></figure>
<ul>
<li>合并case的写法</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> anotherCharacter: <span class="hljs-type">Character</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a&quot;</span><br><span class="hljs-keyword">switch</span> anotherCharacter &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>: <span class="hljs-comment">// 写在同一行，逗号隔开</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The letter A&quot;</span>)<br><span class="hljs-keyword">default</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Not the letter A&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;The letter A&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>变量赋值</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> aCharacter: <span class="hljs-type">Character</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a&quot;</span><br><span class="hljs-keyword">let</span> message <span class="hljs-operator">=</span> <span class="hljs-keyword">switch</span> aCharacter &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;a&quot;</span>:<br>    <span class="hljs-string">&quot;The first letter of the Latin alphabet&quot;</span><br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;z&quot;</span>:<br>    <span class="hljs-string">&quot;The last letter of the Latin alphabet&quot;</span><br><span class="hljs-keyword">default</span>:<br>    <span class="hljs-string">&quot;Some other character&quot;</span><br>&#125;<br><span class="hljs-built_in">print</span>(message)<br><span class="hljs-comment">// Prints &quot;The first letter of the Latin alphabet&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>间隔匹配</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> approximateCount <span class="hljs-operator">=</span> <span class="hljs-number">62</span><br><span class="hljs-keyword">let</span> countedThings <span class="hljs-operator">=</span> <span class="hljs-string">&quot;moons orbiting Saturn&quot;</span><br><span class="hljs-keyword">let</span> naturalCount: <span class="hljs-type">String</span><br><span class="hljs-keyword">switch</span> approximateCount &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<br>    naturalCount <span class="hljs-operator">=</span> <span class="hljs-string">&quot;no&quot;</span><br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">5</span>:<br>    naturalCount <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a few&quot;</span><br><span class="hljs-keyword">case</span> <span class="hljs-number">5</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">12</span>:<br>    naturalCount <span class="hljs-operator">=</span> <span class="hljs-string">&quot;several&quot;</span><br><span class="hljs-keyword">case</span> <span class="hljs-number">12</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">100</span>:<br>    naturalCount <span class="hljs-operator">=</span> <span class="hljs-string">&quot;dozens of&quot;</span><br><span class="hljs-keyword">case</span> <span class="hljs-number">100</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">1000</span>:<br>    naturalCount <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hundreds of&quot;</span><br><span class="hljs-keyword">default</span>:<br>    naturalCount <span class="hljs-operator">=</span> <span class="hljs-string">&quot;many&quot;</span><br>&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;There are <span class="hljs-subst">\(naturalCount)</span> <span class="hljs-subst">\(countedThings)</span>.&quot;</span>)<br><span class="hljs-comment">// Prints &quot;There are dozens of moons orbiting Saturn.&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>支持<code>where</code>语句：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> vegetable <span class="hljs-operator">=</span> <span class="hljs-string">&quot;red pepper&quot;</span><br><span class="hljs-keyword">switch</span> vegetable &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;celery&quot;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Add some raisins and make ants on a log.&quot;</span>)<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;cucumber&quot;</span>, <span class="hljs-string">&quot;watercress&quot;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;That would make a good tea sandwich.&quot;</span>)<br><span class="hljs-keyword">case</span> <span class="hljs-keyword">let</span> x <span class="hljs-keyword">where</span> x.hasSuffix(<span class="hljs-string">&quot;pepper&quot;</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Is it a spicy <span class="hljs-subst">\(x)</span>?&quot;</span>)<br><span class="hljs-keyword">default</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Everything tastes good in soup.&quot;</span>)<br>&#125;<br><span class="hljs-comment">// Prints &quot;Is it a spicy red pepper?&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="3-for"><a href="#3-for" class="headerlink" title="3.for"></a>3.for</h4><p><code>for-in</code>遍历集合：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">let</span> interestingNumbers <span class="hljs-operator">=</span> [<br>    <span class="hljs-string">&quot;Prime&quot;</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>],<br>    <span class="hljs-string">&quot;Fibonacci&quot;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>],<br>    <span class="hljs-string">&quot;Square&quot;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>],<br>]<br><span class="hljs-keyword">var</span> largest <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">_</span>, numbers) <span class="hljs-keyword">in</span> interestingNumbers &#123;<br>    <span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> numbers &#123;<br>        <span class="hljs-keyword">if</span> number <span class="hljs-operator">&gt;</span> largest &#123;<br>            largest <span class="hljs-operator">=</span> number<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-built_in">print</span>(largest)<br><span class="hljs-comment">// Prints &quot;25&quot;</span><br></code></pre></td></tr></table></figure>

<p>支持<code>..&lt;</code>右不包含、<code>...</code>左右都包含的区间遍历：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> total <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">4</span> &#123;<br>    total <span class="hljs-operator">+=</span> i<br>&#125;<br><span class="hljs-built_in">print</span>(total)<br><span class="hljs-comment">// Prints &quot;6&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="4-while"><a href="#4-while" class="headerlink" title="4.while"></a>4.while</h4><ul>
<li>1.一般用法：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> n <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br><span class="hljs-keyword">while</span> n <span class="hljs-operator">&lt;</span> <span class="hljs-number">100</span> &#123;<br>    n <span class="hljs-operator">*=</span> <span class="hljs-number">2</span><br>&#125;<br><span class="hljs-built_in">print</span>(n)<br><span class="hljs-comment">// Prints &quot;128&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>2.repeat用法：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">var</span> m <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br><span class="hljs-keyword">repeat</span> &#123;<br>    m <span class="hljs-operator">*=</span> <span class="hljs-number">2</span><br>&#125; <span class="hljs-keyword">while</span> m <span class="hljs-operator">&lt;</span> <span class="hljs-number">100</span><br><span class="hljs-built_in">print</span>(m)<br><span class="hljs-comment">// Prints &quot;128&quot;</span><br></code></pre></td></tr></table></figure>
<p>保证循环至少执行一次。</p>
<h3 id="6-函数"><a href="#6-函数" class="headerlink" title="6.函数"></a>6.函数</h3><ul>
<li>1.局部参数名</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">person</span>: <span class="hljs-type">String</span>, <span class="hljs-params">day</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello <span class="hljs-subst">\(person)</span>, today is <span class="hljs-subst">\(day)</span>.&quot;</span><br>&#125;<br>greet(person: <span class="hljs-string">&quot;Bob&quot;</span>, day: <span class="hljs-string">&quot;Tuesday&quot;</span>)<br></code></pre></td></tr></table></figure>

<p><code>person</code>、<code>day</code>都是局部参数，在函数体内使用。</p>
<ul>
<li>2.外部参数名</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">greet</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">person</span>: <span class="hljs-type">String</span>, <span class="hljs-params">on</span> <span class="hljs-params">day</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello <span class="hljs-subst">\(person)</span>, today is <span class="hljs-subst">\(day)</span>.&quot;</span><br>&#125;<br>greet(<span class="hljs-string">&quot;John&quot;</span>, on: <span class="hljs-string">&quot;Wednesday&quot;</span>)<br></code></pre></td></tr></table></figure>
<p><code>_</code>、<code>on</code>即为外部参数名，其中<code>_</code>表示外部参数名可省略，调用时无需书写。</p>
<ul>
<li>3.inout参数</li>
</ul>
<p>在函数中定义的参数默认都是常量参数，函数体内不可以修改它的值；</p>
<p>如果想声明一个变量参数，可以在参数定义前加上<code>inout</code>关键字：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">swapTwoInts</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">a</span>: <span class="hljs-keyword">inout</span> <span class="hljs-type">Int</span>, <span class="hljs-keyword">_</span> <span class="hljs-params">b</span>: <span class="hljs-keyword">inout</span> <span class="hljs-type">Int</span>) &#123;<br>    <span class="hljs-keyword">let</span> temporaryA <span class="hljs-operator">=</span> a<br>    a <span class="hljs-operator">=</span> b<br>    b <span class="hljs-operator">=</span> temporaryA<br>&#125;<br><span class="hljs-keyword">var</span> someInt <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br><span class="hljs-keyword">var</span> anotherInt <span class="hljs-operator">=</span> <span class="hljs-number">107</span><br>swapTwoInts(<span class="hljs-operator">&amp;</span>someInt, <span class="hljs-operator">&amp;</span>anotherInt)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;someInt is now <span class="hljs-subst">\(someInt)</span>, and anotherInt is now <span class="hljs-subst">\(anotherInt)</span>&quot;</span>)<br><span class="hljs-comment">// Prints &quot;someInt is now 107, and anotherInt is now 3&quot;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>4.参数默认值</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">someFunction</span>(<span class="hljs-params">a</span>: <span class="hljs-type">Int</span>, <span class="hljs-params">b</span>: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span>) &#123;<br>    <span class="hljs-comment">// If you omit the second argument when calling this function, then</span><br>    <span class="hljs-comment">// the value of b is 12 inside the function body.</span><br>&#125;<br>someFunction(a: <span class="hljs-number">3</span>, b: <span class="hljs-number">6</span>) <span class="hljs-comment">// b is 6</span><br>someFunction(a: <span class="hljs-number">4</span>) <span class="hljs-comment">// b is 12</span><br></code></pre></td></tr></table></figure>

<h3 id="7-结构体与类"><a href="#7-结构体与类" class="headerlink" title="7.结构体与类"></a>7.结构体与类</h3><p>相同点：</p>
<ul>
<li>定义属性和方法；</li>
<li>使用下标语法<code>subscript syntax</code>；</li>
<li>定义初始化器设置初始状态；</li>
<li>添加扩展、实现协议；</li>
</ul>
<p>class 独有的特性：</p>
<ul>
<li>继承</li>
<li>类型转换<code>Type casting</code></li>
<li>析构</li>
<li>class 的实例可被多个对象引用</li>
</ul>
<p>最大的不同：struct 是值类型，class 是引用类型。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-comment">// 单例</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">Singleton</span>()<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() &#123;<br>        <span class="hljs-comment">// 不要忘记把构造器变成私有</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++singleton&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> singleton <span class="hljs-operator">=</span> <span class="hljs-type">Singleton</span>.shared<br></code></pre></td></tr></table></figure>

<h3 id="8-单例"><a href="#8-单例" class="headerlink" title="8.单例"></a>8.单例</h3><ul>
<li>方式1: 静态常量</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonClass</span> &#123;<br>    <span class="hljs-comment">// 声明类变量</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">SingletonClass</span>()<br>    <span class="hljs-comment">// 声明成私有 防止外界通过SingletonClass()创建实例</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() &#123;<br>    &#125;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">instanceFunc</span>()&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;+++call static func~&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 调用单例及其方法</span><br><span class="hljs-type">SingletonClass</span>.shared.instanceFunc()<br></code></pre></td></tr></table></figure>

<ul>
<li>方式2: 静态变量+闭包</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonClass2</span> &#123;<br>    <span class="hljs-comment">// 声明类变量</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> shared: <span class="hljs-type">SingletonClass2</span> <span class="hljs-operator">=</span> &#123;<br>        <span class="hljs-keyword">let</span> instance <span class="hljs-operator">=</span> <span class="hljs-type">SingletonClass2</span>()<br>        <span class="hljs-comment">// 进行额外的配置和初始化</span><br>        <span class="hljs-keyword">return</span> instance<br>    &#125;() <span class="hljs-comment">// 这里的闭包会在第一次访问 shared 属性时执行，从而保证只有一个实例被创建。</span><br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() &#123;<br>        <span class="hljs-comment">// 私有化初始化方法，防止其他地方创建实例</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">instanceFunc</span>()&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;+++call static func2~&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 调用单例及其方法</span><br><span class="hljs-type">SingletonClass2</span>.shared.instanceFunc()<br></code></pre></td></tr></table></figure>

<ul>
<li>方式3：内部结构体</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonClass3</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> shared: <span class="hljs-type">SingletonClass3</span> &#123;<br>        <span class="hljs-comment">//结构体</span><br>        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">SingletonStruct</span> &#123;<br>            <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">SingletonClass3</span>()<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-type">SingletonStruct</span>.shared<br>    &#125;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() &#123;<br>    &#125;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">instanceFunc</span>()&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;+++call static func3~&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 调用单例及其方法</span><br><span class="hljs-type">SingletonClass3</span>.shared.instanceFunc()<br></code></pre></td></tr></table></figure>

<ul>
<li>方法4：全局常量</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-comment">//全局常量，只对当前.swift文件可见，别的文件中创建此单例时看不到此常量</span><br><span class="hljs-keyword">fileprivate</span> <span class="hljs-keyword">let</span> globalVar <span class="hljs-operator">=</span> <span class="hljs-type">SingletonClass4</span>()<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonClass4</span> &#123;<br>    <span class="hljs-comment">//静态变量</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> shared: <span class="hljs-type">SingletonClass4</span> &#123;<br>        <span class="hljs-keyword">return</span> globalVar<br>    &#125;<br><br>    <span class="hljs-keyword">fileprivate</span> <span class="hljs-keyword">init</span>() &#123; &#125;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">instanceFunc</span>()&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;+++call static func4~&quot;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 调用单例及其方法</span><br><span class="hljs-type">SingletonClass4</span>.shared.instanceFunc()<br></code></pre></td></tr></table></figure>

<p>四种方式从本质上来说，都是利用了类的静态类属性。</p>
<h3 id="9-构造器"><a href="#9-构造器" class="headerlink" title="9.构造器"></a>9.构造器</h3><p>Swift 中类的初始化顺序如下：</p>
<ol>
<li>初始化自己的存储属性，必须；</li>
<li>调用父类初始化方法，如无需第3步，则这一步也可省略；</li>
<li>修改父类成员变量，可选。</li>
</ol>
<p>构造器结束前，需要完成本类中所有存储属性的初始化；</p>
<p>子类构造器中，存储属性必须全部初始化，才能调用super构造器，否则会报错；</p>
<p>子类构造器中，需要先完成父类的初始化，才能给从父类中继承的属性赋值，否则会报错；</p>
<p>便利构造器中，不能直接调用super构造器，可调用本类中默认构造器，或者其他便利构造器；</p>
<p>便利构造器中，可以将初始化任务代理给其他构造器，但最终需要调用本类的默认构造器。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Graph</span> &#123;<br>    <span class="hljs-keyword">var</span> corners:<span class="hljs-type">Int</span><br>    <span class="hljs-keyword">var</span> description: <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;<span class="hljs-subst">\(corners)</span> 边&quot;</span><br>    &#125;<br>    <span class="hljs-keyword">init</span>(<span class="hljs-params">corners</span>:<span class="hljs-type">Int</span>) &#123;<br>        <span class="hljs-keyword">self</span>.corners <span class="hljs-operator">=</span> corners <span class="hljs-comment">// 构造函数结束前 需要完成所有存储属性的初始化</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> rectangle <span class="hljs-operator">=</span> <span class="hljs-type">Graph</span>(corners: <span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;矩形: <span class="hljs-subst">\(rectangle.description)</span>&quot;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubGraph</span>: <span class="hljs-title class_">Graph</span> &#123;<br>    <span class="hljs-keyword">var</span> aInt:<span class="hljs-type">Int</span><br>    <span class="hljs-comment">// 子类初始化函数</span><br>    <span class="hljs-keyword">init</span>(<span class="hljs-params">aInt</span>:<span class="hljs-type">Int</span> ,<span class="hljs-params">corners</span>:<span class="hljs-type">Int</span>) &#123;<br>        <span class="hljs-keyword">self</span>.aInt <span class="hljs-operator">=</span> aInt <span class="hljs-comment">// 注意：子类存储属性须全部初始化完成，才能调用super构造器，否则会报错：Property &#x27;self.xxx&#x27; not initialized at super.init call</span><br>        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(corners: corners)<br>        <span class="hljs-keyword">self</span>.corners <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-comment">// 注意：需要先完成父类的初始化，才能在子类中给父类中继承的属性赋值，否则会报错：self&#x27; used in property access &#x27;corners&#x27; before &#x27;super.init&#x27; call</span><br>    &#125;<br>    <span class="hljs-comment">// 便利构造函数</span><br>    <span class="hljs-keyword">convenience</span> <span class="hljs-keyword">init</span>()&#123;<br>        <span class="hljs-keyword">self</span>.<span class="hljs-keyword">init</span>(aInt:<span class="hljs-number">1</span>, corners: <span class="hljs-number">5</span>) <span class="hljs-comment">// 调用本类中默认构造器</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> subGraph <span class="hljs-operator">=</span> <span class="hljs-type">SubGraph</span>() <span class="hljs-comment">//调用便利函数</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;五角形: <span class="hljs-subst">\(subGraph.description)</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="10-Extension"><a href="#10-Extension" class="headerlink" title="10.Extension"></a>10.Extension</h3><p>Swift 的扩展能向一个已有的类、结构体或枚举类型添加新功能：</p>
<ul>
<li>添加计算型属性和计算型静态属性；</li>
<li>定义实例方法和类型方法；</li>
<li>提供新的构造器；</li>
<li>定义下标；</li>
<li>定义和使用新的嵌套类型；</li>
<li>使一个已有类型符合某个协议；</li>
</ul>
<h4 id="1-基本语法"><a href="#1-基本语法" class="headerlink" title="1.基本语法"></a>1.基本语法</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">SomeType</span> &#123;<br>    <span class="hljs-comment">// 这里添加新功能</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2-增加计算属性"><a href="#2-增加计算属性" class="headerlink" title="2.增加计算属性"></a>2.增加计算属性</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Int</span> &#123;<br>   <span class="hljs-keyword">var</span> add: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span> &#125;<br>   <span class="hljs-keyword">var</span> sub: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">-</span> <span class="hljs-number">1</span> &#125;<br>   <span class="hljs-keyword">var</span> mul: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">*</span> <span class="hljs-number">1</span> &#125;<br>   <span class="hljs-keyword">var</span> div: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">/</span> <span class="hljs-number">1</span> &#125;<br>&#125;<br><span class="hljs-keyword">let</span> addition <span class="hljs-operator">=</span> <span class="hljs-number">1</span>.add<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;加法运算：<span class="hljs-subst">\(addition)</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="3-增加新的方法"><a href="#3-增加新的方法" class="headerlink" title="3.增加新的方法"></a>3.增加新的方法</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Int</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">repetitions</span>(<span class="hljs-params">task</span>: () -&gt; <span class="hljs-type">Void</span>) &#123;<br>        <span class="hljs-keyword">for</span> <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-keyword">self</span> &#123;<br>            task()<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//调用</span><br><span class="hljs-number">3</span>.repetitions &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>注意：扩展可以添加新功能，但不能重写已有的功能：</p>
<ul>
<li>不能增加父类；</li>
<li>不能覆盖原有的方法；</li>
<li>不能增加存储属性；</li>
<li>不能为已有属性添加观察器；</li>
</ul>
<p>Swift 的<code>Extension</code>与 OC 的<code>Category</code>都不能改变原类型的内存结构，而增加存储属性会改变内存结构。OC 中可使用<code>关联对象</code>达到给分类增加属性实现存取的效果，Swift 也可以参考这种做法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">AssociatedKey</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> textKey: <span class="hljs-type">String</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;textKey&quot;</span><br>&#125;<br><br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Int</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> text: <span class="hljs-type">String</span>? &#123;<br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> objc_getAssociatedObject(<span class="hljs-keyword">self</span>, <span class="hljs-operator">&amp;</span><span class="hljs-type">AssociatedKey</span>.textKey) <span class="hljs-keyword">as?</span> <span class="hljs-type">String</span><br>        &#125;<br>        <span class="hljs-keyword">set</span> &#123;<br>            objc_setAssociatedObject(<span class="hljs-keyword">self</span>, <span class="hljs-operator">&amp;</span><span class="hljs-type">AssociatedKey</span>.textKey, newValue, .<span class="hljs-type">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span>)<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">var</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>a.text <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span>    <span class="hljs-comment">//存值</span><br><span class="hljs-built_in">print</span>(a.text<span class="hljs-operator">!</span>)  <span class="hljs-comment">//取值</span><br></code></pre></td></tr></table></figure>

<h4 id="4-现有类适配协议"><a href="#4-现有类适配协议" class="headerlink" title="4.现有类适配协议"></a>4.现有类适配协议</h4><p>扩展已有类型，使其能够适配一个或多个协议：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-comment">// 注意，冒号`:`后面只能使用`协议`，不能是某个`类`。</span><br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">SomeType</span>: <span class="hljs-title class_">SomeProtocol</span>, <span class="hljs-title class_">AnotherProtocol</span> &#123;<br>    <span class="hljs-comment">// 协议的实现写到这里</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-keyword">var</span> add: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">var</span> sub: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">var</span> mul: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">var</span> div: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <br>&#125;<br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Int</span>: <span class="hljs-title class_">Calculator</span> &#123;<br>   <span class="hljs-keyword">var</span> add: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">+</span> <span class="hljs-number">100</span> &#125;<br>   <span class="hljs-keyword">var</span> sub: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">-</span> <span class="hljs-number">10</span> &#125;<br>   <span class="hljs-keyword">var</span> mul: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">*</span> <span class="hljs-number">10</span> &#125;<br>   <span class="hljs-keyword">var</span> div: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">/</span> <span class="hljs-number">5</span> &#125;<br>&#125;<br><span class="hljs-keyword">let</span> addition <span class="hljs-operator">=</span> <span class="hljs-number">3</span>.add<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;加法运算后的值：<span class="hljs-subst">\(addition)</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="5-协议方法默认实现"><a href="#5-协议方法默认实现" class="headerlink" title="5.协议方法默认实现"></a>5.协议方法默认实现</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">IOS</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">run</span>()<br>&#125;<br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">IOS</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">run</span>()&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;run on <span class="hljs-subst">\(<span class="hljs-keyword">self</span>)</span>&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">iPhone</span>: <span class="hljs-title class_">IOS</span>&#123;<br><span class="hljs-comment">// 给协议方法提供默认实现后，这里就可以不重写协议方法了</span><br><span class="hljs-comment">//    func run() &#123;</span><br><span class="hljs-comment">//        print(&quot;run on \(self)&quot;)</span><br><span class="hljs-comment">//    &#125;</span><br>&#125;<br><span class="hljs-keyword">let</span> iphoneX <span class="hljs-operator">=</span> iPhone()<br>iphoneX.run()<br></code></pre></td></tr></table></figure>

<p>默认情况下，<code>iPhone</code>类中需要重写<code>run()</code>协议方法并提供自己的实现，否则编译时会报错。通过<code>extension</code>给<code>IOS</code>协议中的<code>run()</code>提供默认实现后，<code>iPhone</code>类中可以不再重写此协议方法，调用时会使用协议扩展中的默认实现。</p>
<h3 id="11-Protocols"><a href="#11-Protocols" class="headerlink" title="11.Protocols"></a>11.Protocols</h3><p>协议规定了实现特定功能所必需的方法和属性。类、结构体、枚举均可遵循协议并提供具体实现。</p>
<h4 id="1-语法"><a href="#1-语法" class="headerlink" title="1.语法"></a>1.语法</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-comment">// 定义协议</span><br><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-comment">// protocol definition goes here</span><br>&#125;<br><br><span class="hljs-comment">// 实现超类与协议</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeClass</span>: <span class="hljs-title class_">SomeSuperclass</span>, <span class="hljs-title class_">FirstProtocol</span>, <span class="hljs-title class_">AnotherProtocol</span> &#123;<br>    <span class="hljs-comment">// 这里提供协议的具体实现</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2-属性"><a href="#2-属性" class="headerlink" title="2.属性"></a>2.属性</h4><p>协议中可指定实例属性或类属性，不用指定是存储型属性还是计算型属性。</p>
<p>协议中必须指明属性是只读的还是可读可写的：</p>
<p>协议中指定为可读可写的属性，实现中必须也是可读可写；</p>
<p>协议中指定为只读的属性，实现中可以保持只读也可以可读可写，只要满足协议中的要求即可。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">var</span> mustBeSettable: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> <span class="hljs-keyword">set</span> &#125;          <span class="hljs-comment">// 可读可写</span><br>    <span class="hljs-keyword">var</span> doesNotNeedToBeSettable: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;     <span class="hljs-comment">// 只读</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> someTypeProperty: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> <span class="hljs-keyword">set</span> &#125; <span class="hljs-comment">// 类型属性</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="3-方法"><a href="#3-方法" class="headerlink" title="3.方法"></a>3.方法</h4><p>协议中可以定义实例方法或类型方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">someInstanceMethod</span>()<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">someTypeMethod</span>()<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="4-构造器"><a href="#4-构造器" class="headerlink" title="4.构造器"></a>4.构造器</h4><p>协议可以要求它的遵循者实现指定的构造器。</p>
<p>在遵循该协议的类中实现构造器时，可以指定其为类的指定构造器或者便利构造器。两种情况下，都必须给构造器的实现标上<code>required</code>修饰符：</p>
<p>示例1：实现中声明为指定构造器</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>   <span class="hljs-keyword">init</span>(<span class="hljs-params">someParameter</span>: <span class="hljs-type">Int</span>)<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeClass</span>: <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">required</span> <span class="hljs-keyword">init</span>(<span class="hljs-params">someParameter</span>: <span class="hljs-type">Int</span>) &#123; <span class="hljs-comment">// 指定构造器</span><br>        <span class="hljs-comment">// 这里是构造器的具体实现</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>示例2：实现中声明为便利构造器</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>   <span class="hljs-keyword">init</span>(<span class="hljs-params">someParameter</span>: <span class="hljs-type">Int</span>)<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeClass</span>: <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">init</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;designed init&quot;</span>)<br>    &#125;<br>    <span class="hljs-keyword">required</span> <span class="hljs-keyword">convenience</span> <span class="hljs-keyword">init</span>(<span class="hljs-params">someParameter</span>: <span class="hljs-type">Int</span>) &#123; <span class="hljs-comment">// 便利构造器</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;convenience init&quot;</span>)<br>        <span class="hljs-keyword">self</span>.<span class="hljs-keyword">init</span>()<br>    &#125;<br>&#125;<br><span class="hljs-keyword">var</span> inst <span class="hljs-operator">=</span> <span class="hljs-type">SomeClass</span>(someParameter: <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>

<p>如果一个子类重写了父类的指定构造器，并且该构造器遵循了某个协议的规定，那么该构造器的实现需要被同时标示<code>required</code>和<code>override</code>修饰符：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">init</span>()<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeSuperClass</span> &#123;<br>    <span class="hljs-keyword">init</span>() &#123;<br>        <span class="hljs-comment">// initializer implementation goes here</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeSubClass</span>: <span class="hljs-title class_">SomeSuperClass</span>, <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">required</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">init</span>() &#123; <span class="hljs-comment">// 这里 同时提供两个标注</span><br>        <span class="hljs-comment">// initializer implementation goes here</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5-用作代理"><a href="#5-用作代理" class="headerlink" title="5.用作代理"></a>5.用作代理</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeController</span>: <span class="hljs-title class_">UIViewController</span>, <span class="hljs-title class_">UITableViewDelegate</span> &#123;<br>    <br>    <span class="hljs-keyword">var</span> tableview: <span class="hljs-type">UITableView</span><br><br>    <span class="hljs-keyword">required</span> <span class="hljs-keyword">init?</span>(<span class="hljs-params">coder</span>: <span class="hljs-type">NSCoder</span>) &#123;<br>        tableview <span class="hljs-operator">=</span> <span class="hljs-type">UITableView</span>.<span class="hljs-keyword">init</span>()<br>        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(coder: coder)<br>    &#125;<br><br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() &#123;<br>        <span class="hljs-keyword">super</span>.viewDidLoad()<br>        tableview.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span> <span class="hljs-comment">// 设置代理</span><br>    &#125;<br><br>    <span class="hljs-comment">// 实现代理方法</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">numberOfRowsInSection</span> <span class="hljs-params">section</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="6-类的扩展"><a href="#6-类的扩展" class="headerlink" title="6.类的扩展"></a>6.类的扩展</h4><p>扩展现有类，使其遵循某个协议，即使你无法访问该类的源码。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-keyword">var</span> add: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">var</span> sub: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">var</span> mul: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">var</span> div: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <br>&#125;<br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Int</span>: <span class="hljs-title class_">Calculator</span> &#123;<br>   <span class="hljs-keyword">var</span> add: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">+</span> <span class="hljs-number">100</span> &#125;<br>   <span class="hljs-keyword">var</span> sub: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">-</span> <span class="hljs-number">10</span> &#125;<br>   <span class="hljs-keyword">var</span> mul: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">*</span> <span class="hljs-number">10</span> &#125;<br>   <span class="hljs-keyword">var</span> div: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">/</span> <span class="hljs-number">5</span> &#125;<br>&#125;<br><span class="hljs-keyword">let</span> addition <span class="hljs-operator">=</span> <span class="hljs-number">3</span>.add<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;加法运算后的值：<span class="hljs-subst">\(addition)</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="7-where与协议"><a href="#7-where与协议" class="headerlink" title="7.where与协议"></a>7.where与协议</h4><p>示例：数组中元素须遵循<code>TextRepresentable</code>协议</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Textable</span> &#123;<br>    <span class="hljs-keyword">var</span> inText: <span class="hljs-type">String</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Dice</span> &#123;<br>    <span class="hljs-keyword">var</span> sides: <span class="hljs-type">Int</span><br>&#125;<br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Dice</span>: <span class="hljs-title class_">Textable</span> &#123;<br>    <span class="hljs-keyword">var</span> inText: <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;A <span class="hljs-subst">\(sides)</span>-sided dice&quot;</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Array</span>: <span class="hljs-title class_">Textable</span> <span class="hljs-title class_">where</span> <span class="hljs-title class_">Element</span>: <span class="hljs-title class_">Textable</span> &#123;<br>    <span class="hljs-keyword">var</span> inText: <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">let</span> itemsAsText <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.map &#123; <span class="hljs-variable">$0</span>.inText &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;[&quot;</span> <span class="hljs-operator">+</span> itemsAsText.joined(separator: <span class="hljs-string">&quot;, &quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;]&quot;</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> d6 <span class="hljs-operator">=</span> <span class="hljs-type">Dice</span>(sides: <span class="hljs-number">6</span>)<br><span class="hljs-keyword">let</span> d12 <span class="hljs-operator">=</span> <span class="hljs-type">Dice</span>(sides: <span class="hljs-number">12</span>)<br><span class="hljs-keyword">let</span> myDice <span class="hljs-operator">=</span> [d6, d12]<br><span class="hljs-built_in">print</span>(myDice.inText)<br></code></pre></td></tr></table></figure>

<h4 id="8-协议的继承"><a href="#8-协议的继承" class="headerlink" title="8.协议的继承"></a>8.协议的继承</h4><p>协议能够继承一个或多个其他协议，可以在继承的协议基础上增加新的要求。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">InheritingProtocol</span>: <span class="hljs-title class_">SomeProtocol</span>, <span class="hljs-title class_">AnotherProtocol</span> &#123;<br>    <span class="hljs-comment">// 协议定义</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="9-类专属协议"><a href="#9-类专属协议" class="headerlink" title="9.类专属协议"></a>9.类专属协议</h4><p>定义一个只有<code>类</code>可以实现的协议，需要在协议的继承列表中加入<code>AnyObject</code>协议。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeClassOnlyProtocol</span>: <span class="hljs-title class_">AnyObject</span>, <span class="hljs-title class_">SomeInheritedProtocol</span> &#123;<br>    <span class="hljs-comment">// class-only protocol definition goes here</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>这样枚举、结构体就不能实现此协议了。</p>
<h4 id="10-合成协议"><a href="#10-合成协议" class="headerlink" title="10.合成协议"></a>10.合成协议</h4><p>一个类型可以同时遵循多个协议，通过<code>协议1 &amp; 协议2 &amp; 协议3</code>的形式将多个协议合成一个。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Named</span> &#123;<br>    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>&#125;<br><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Aged</span> &#123;<br>    <span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span>: <span class="hljs-title class_">Named</span>, <span class="hljs-title class_">Aged</span> &#123;<br>    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span><br>    <span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span><br>&#125;<br><span class="hljs-keyword">func</span> <span class="hljs-title function_">wishHappyBirthday</span>(<span class="hljs-params">to</span> <span class="hljs-params">celebrator</span>: <span class="hljs-type">Named</span> &amp; <span class="hljs-type">Aged</span>) &#123; <span class="hljs-comment">// 合成协议</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Happy birthday, <span class="hljs-subst">\(celebrator.name)</span>, you&#x27;re <span class="hljs-subst">\(celebrator.age)</span>!&quot;</span>)<br>&#125;<br><span class="hljs-keyword">let</span> birthdayPerson <span class="hljs-operator">=</span> <span class="hljs-type">Person</span>(name: <span class="hljs-string">&quot;Malcolm&quot;</span>, age: <span class="hljs-number">21</span>)<br>wishHappyBirthday(to: birthdayPerson)<br><span class="hljs-comment">// Prints &quot;Happy birthday, Malcolm, you&#x27;re 21!&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="11-可选协议"><a href="#11-可选协议" class="headerlink" title="11.可选协议"></a>11.可选协议</h4><p>Swift可以像OC一样，在协议中定义一些不需要实现类必须满足的属性或方法，这些属性或方法须标记为<code>optional</code>，同时这些可选属性或方法以及协议本身，都需要标记为<code>@objc</code>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">@objc</span> <span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">someFunction</span>() <span class="hljs-comment">// 必选方法</span><br>    <span class="hljs-keyword">@objc</span> <span class="hljs-keyword">optional</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">someOptionalFunction</span>() <span class="hljs-comment">// 可选方法</span><br>    <span class="hljs-keyword">@objc</span> <span class="hljs-keyword">optional</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">someOptionalFunctionWithParm</span>(<span class="hljs-params">p</span>:<span class="hljs-type">Int</span>) <span class="hljs-comment">// 可选带参方法</span><br>    <span class="hljs-keyword">@objc</span> <span class="hljs-keyword">optional</span> <span class="hljs-keyword">var</span> someTypeProperty: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> <span class="hljs-keyword">set</span> &#125; <span class="hljs-comment">// 可选属性</span><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeClass</span> : <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">var</span> someTypeProperty: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-comment">// 实现可选属性</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">someFunction</span>() &#123;         <span class="hljs-comment">// 实现必选方法</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;someFunction()&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">var</span> delegate: <span class="hljs-type">SomeProtocol</span>? <span class="hljs-operator">=</span> <span class="hljs-type">SomeClass</span>()<br>delegate<span class="hljs-operator">?</span>.someFunction()<br>delegate<span class="hljs-operator">?</span>.someOptionalFunction<span class="hljs-operator">?</span>()<br>delegate<span class="hljs-operator">?</span>.someOptionalFunctionWithParm<span class="hljs-operator">?</span>(p: <span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(delegate<span class="hljs-operator">?</span>.someTypeProperty <span class="hljs-operator">??</span> <span class="hljs-number">100</span>)<br></code></pre></td></tr></table></figure>
<p>需要注意的是：</p>
<p>因为<code>@objc</code>只能用于<code>Class</code>类型，所以只有<code>Class</code>才能实现这种协议，结构体和枚举都不行。</p>
<p>在协议中使用<code>optional</code>属性或方法时，它们的类型会自动变成可选类型。例如<code>(Int) -&gt; String</code>函数类型会变成<code>((Int) -&gt; String)?</code>可选类型。</p>
<h4 id="12-扩展协议"><a href="#12-扩展协议" class="headerlink" title="12.扩展协议"></a>12.扩展协议</h4><p>通过<code>extension</code>可以给协议增加方法、计算属性、下标、构造器，并且可以给方法、计算属性添加默认实现。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">someFunction</span>()<br>    <span class="hljs-keyword">var</span> someTypeProperty: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> <span class="hljs-keyword">set</span> &#125;<br>&#125;<br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">var</span> someTypeProperty: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#123; <span class="hljs-number">1</span> &#125; &#125; <span class="hljs-comment">// 扩展已有属性，默认返回1</span><br>    <span class="hljs-keyword">var</span> someTypeProperty2: <span class="hljs-type">Int</span> &#123; <span class="hljs-number">2</span> &#125; <span class="hljs-comment">// 新增计算属性，默认返回2</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">someFunction</span>()&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;default implementation&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeClass</span> : <span class="hljs-title class_">SomeProtocol</span> &#123;<br>    <span class="hljs-keyword">var</span> someTypeProperty: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-comment">// 实现协议属性并赋值</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">someFunction</span>() &#123;         <span class="hljs-comment">// 实现协议方法并重写具体实现</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;this is new imp for someFunction()&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">var</span> delegate: <span class="hljs-type">SomeProtocol</span>? <span class="hljs-operator">=</span> <span class="hljs-type">SomeClass</span>()<br>delegate<span class="hljs-operator">?</span>.someFunction()<br><span class="hljs-built_in">print</span>(delegate<span class="hljs-operator">?</span>.someTypeProperty <span class="hljs-operator">??</span> <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(delegate<span class="hljs-operator">?</span>.someTypeProperty2 <span class="hljs-operator">??</span> <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>

<h3 id="12-相等"><a href="#12-相等" class="headerlink" title="12.相等"></a>12.相等</h3><blockquote>
<p>Note that identical to (represented by three equals signs, or &#x3D;&#x3D;&#x3D;) doesn’t mean the same thing as equal to (represented by two equals signs, or &#x3D;&#x3D;). Identical to means that two constants or variables of class type refer to exactly the same class instance. Equal to means that two instances are considered equal or equivalent in value, for some appropriate meaning of equal, as defined by the type’s designer.</p>
</blockquote>
<blockquote>
<p>When you define your own custom structures and classes, it’s your responsibility to decide what qualifies as two instances being equal. </p>
</blockquote>
<ul>
<li><code>===</code>表示两个实例引用了相同的对象，强调“引用”相同；</li>
<li><code>==</code> 表示两个实例中的值“相等”，至于哪些值相等，需要自己在类中定义；</li>
</ul>
<p>自定义类时，实现<code>Equatable</code>协议并重写全局操作符<code>==</code>来决定两个操作数是否相等。</p>
<p>#示例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>:<span class="hljs-title class_">Equatable</span> &#123;<br>    <br>    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>?<br>    <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">==</span>(<span class="hljs-params">lhs</span>:<span class="hljs-type">Cat</span>, <span class="hljs-params">rhs</span>:<span class="hljs-type">Cat</span>) -&gt; <span class="hljs-type">Bool</span> &#123;<br>        <span class="hljs-keyword">if</span> lhs.name <span class="hljs-operator">==</span> rhs.name&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>调用并打印结果：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">let cat1 = <span class="hljs-built_in">Cat</span>()<br>let cat2 = <span class="hljs-built_in">Cat</span>()<br>cat1<span class="hljs-selector-class">.name</span> = <span class="hljs-string">&quot;Miao&quot;</span><br>cat2<span class="hljs-selector-class">.name</span> = <span class="hljs-string">&quot;Miao&quot;</span><br><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(cat1 == cat2)</span></span> <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure>

<p>注意，<code>===</code>的左右两个操作数必须是类的实例，对枚举或结构体及其变种（String、Array、Dictionary）等使用时会报错。</p>
<h3 id="13-final、static、class"><a href="#13-final、static、class" class="headerlink" title="13.final、static、class"></a>13.final、static、class</h3><h4 id="1-final"><a href="#1-final" class="headerlink" title="1.final"></a>1.final</h4><p>修饰类及其元素，强调不能被继承和重写。</p>
<ul>
<li>final 只能修饰类和类中的元素，不能修饰值类型的结构体和枚举，它们本身就不能被继承；</li>
<li>final 修饰的方法、属性、下标不能被重写；</li>
<li>final 修饰整个类时此类不能被继承，其中的元素也将被标记为 final，因此不能重写；</li>
</ul>
<p>#示例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">var</span> aInt: <span class="hljs-type">Int</span>&#123;<br>        <span class="hljs-keyword">get</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">callFunction</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;A&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>:<span class="hljs-title class_">A</span> &#123; <span class="hljs-comment">// 报错“Inheritance from a final class &#x27;A&#x27;”</span><br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> aInt: <span class="hljs-type">Int</span> &#123; <span class="hljs-comment">// 报错“Property overrides a &#x27;final&#x27; property”</span><br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">2</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">callFunction</span>() &#123; <span class="hljs-comment">//报错“Instance method overrides a &#x27;final&#x27; instance method”</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;B&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>final</code>修饰类的属性、方法时只是将其标记为不能重写，并不会将其变成类属性或类方法。</p>
<h4 id="2-static"><a href="#2-static" class="headerlink" title="2.static"></a>2.static</h4><p>修饰类中元素，强调属于类、不可重写。</p>
<ul>
<li>static 可以修饰类中的元素，但不能修饰类本身;</li>
<li>static 可以修饰结构体中的元素，但不能修饰结构体本身；</li>
<li>static 不能修饰枚举及其元素；</li>
<li>static 修饰的属性为静态属性，修饰的方法为静态方法，不能重写，需通过类型名来调用；</li>
</ul>
<p>#示例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> aInt: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">callFunction</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;A.aInt:<span class="hljs-subst">\(aInt)</span>&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>:<span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">var</span> aInt: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span> <span class="hljs-comment">// 属性前不能加override 否则会报错“Property does not override any property from its superclass”</span><br><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">callFunction</span>() &#123; <span class="hljs-comment">// 方法前不能加override 否则会报错“Method does not override any method from its superclass”</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;B.aInt:<span class="hljs-subst">\(aInt)</span>&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-type">A</span>.aInt <span class="hljs-comment">// 1</span><br><span class="hljs-type">B</span>.aInt <span class="hljs-comment">// 1</span><br><span class="hljs-type">A</span>.callFunction() <span class="hljs-comment">// A.aInt:1</span><br><span class="hljs-keyword">let</span> b <span class="hljs-operator">=</span> <span class="hljs-type">B</span>()<br>b.aInt <span class="hljs-comment">// 2</span><br>b.callFunction()  <span class="hljs-comment">// 打印 B.aInt:2</span><br></code></pre></td></tr></table></figure>

<h4 id="3-class"><a href="#3-class" class="headerlink" title="3.class"></a>3.class</h4><p>修饰类中元素，强调属于类、可重写。</p>
<ul>
<li>class 只能用在类中，不能修饰结构体或枚举及它们的元素；</li>
<li>class 修饰的属性和方法，可以被重写；</li>
<li>class 修饰的属性是类属性，修饰的方法是类方法，可以通过“类名.xx”直接调用；</li>
<li>class 可以修饰计算属性，不能修饰存储属性，因为存储属性属于类的实例；</li>
</ul>
<p>#示例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">var</span> <span class="hljs-title class_">aInt</span>: <span class="hljs-title class_">Int</span> &#123;<br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        &#125;<br>        <span class="hljs-keyword">set</span> &#123;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">func</span> <span class="hljs-title class_">callFunction</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;A&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>:<span class="hljs-title class_">A</span> &#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">var</span> <span class="hljs-title class_">aInt</span>: <span class="hljs-title class_">Int</span> &#123;<br>        <span class="hljs-keyword">get</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">2</span><br>        &#125;<br>        <span class="hljs-keyword">set</span> &#123;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">func</span> <span class="hljs-title class_">callFunction</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;B&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-type">A</span>.aInt <span class="hljs-comment">// 打印：1</span><br><span class="hljs-type">B</span>.aInt <span class="hljs-comment">// 打印：2</span><br><span class="hljs-keyword">let</span> b <span class="hljs-operator">=</span> <span class="hljs-type">B</span>()<br><span class="hljs-type">B</span>.callFunction() <span class="hljs-comment">// 打印：B</span><br></code></pre></td></tr></table></figure>

<h3 id="14-访问控制符"><a href="#14-访问控制符" class="headerlink" title="14.访问控制符"></a>14.访问控制符</h3><p>五种访问修饰符，按从高到低排序是：open &gt; public &gt; interal &gt; fileprivate &gt; private。</p>
<ul>
<li>open：可以被任何模块的代码访问，可以被继承和重写。</li>
<li>public: 可以被任何模块的代码访问，模块外不可继承和重写。</li>
<li>internal：默认访问级别，源代码所在的整个模块都可以访问。</li>
<li>fileprivate：只能在当前文件中访问，当前类的扩展中也可以。</li>
<li>private：只能在当前类与其扩展中访问，子类中无法访问。</li>
</ul>
<h3 id="15-API可用性"><a href="#15-API可用性" class="headerlink" title="15.API可用性"></a>15.API可用性</h3><p><code>#available</code>+<code>if</code>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">10</span>, <span class="hljs-keyword">macOS</span> <span class="hljs-number">10.12</span>, <span class="hljs-operator">*</span>) &#123;<br>    <span class="hljs-comment">// Use iOS 10 APIs on iOS, and use macOS 10.12 APIs on macOS</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// Fall back to earlier iOS and macOS APIs</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>#available</code>+<code>guard</code>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">@available</span>(<span class="hljs-keyword">macOS</span> <span class="hljs-number">10.12</span>, <span class="hljs-operator">*</span>)<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ColorPreference</span> &#123;<br>    <span class="hljs-keyword">var</span> bestColor <span class="hljs-operator">=</span> <span class="hljs-string">&quot;blue&quot;</span><br>&#125;<br><br><span class="hljs-keyword">func</span> <span class="hljs-title function_">chooseBestColor</span>() -&gt; <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">macOS</span> <span class="hljs-number">10.12</span>, <span class="hljs-operator">*</span>) <span class="hljs-keyword">else</span> &#123;<br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;gray&quot;</span><br>    &#125;<br>    <span class="hljs-keyword">let</span> colors <span class="hljs-operator">=</span> <span class="hljs-type">ColorPreference</span>()<br>    <span class="hljs-keyword">return</span> colors.bestColor<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>unavailable</code>反向检查：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">10</span>, <span class="hljs-operator">*</span>) &#123;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// Fallback code</span><br>&#125;<br><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">#unavailable</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">10</span>) &#123;<br>    <span class="hljs-comment">// Fallback code</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>第一个 else 语句与第二个的<code>unavailable</code>是等效的。</p>
<h3 id="16-guard"><a href="#16-guard" class="headerlink" title="16.guard"></a>16.guard</h3><p><code>guard</code>是一种早退出机制，其布尔值须为<code>true</code>才能继续执行后续的代码。</p>
<p><code>guard</code>搭配<code>else</code>语句，如果<code>guard</code>条件为 false，则执行<code>else</code>内的代码。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">person</span>: [<span class="hljs-params">String</span>: <span class="hljs-type">String</span>]) &#123;<br>    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> person[<span class="hljs-string">&quot;name&quot;</span>] <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello <span class="hljs-subst">\(name)</span>!&quot;</span>)<br><br>    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> location <span class="hljs-operator">=</span> person[<span class="hljs-string">&quot;location&quot;</span>] <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I hope the weather is nice near you.&quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I hope the weather is nice in <span class="hljs-subst">\(location)</span>.&quot;</span>)<br>&#125;<br><br>greet(person: [<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John&quot;</span>])<br><span class="hljs-comment">// Prints &quot;Hello John!&quot;</span><br><span class="hljs-comment">// Prints &quot;I hope the weather is nice near you.&quot;</span><br>greet(person: [<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jane&quot;</span>, <span class="hljs-string">&quot;location&quot;</span>: <span class="hljs-string">&quot;Cupertino&quot;</span>])<br><span class="hljs-comment">// Prints &quot;Hello Jane!&quot;</span><br><span class="hljs-comment">// Prints &quot;I hope the weather is nice in Cupertino.&quot;</span><br></code></pre></td></tr></table></figure>

<h3 id="17-defer"><a href="#17-defer" class="headerlink" title="17.defer"></a>17.defer</h3><p><code>defer</code>用于在离开当前代码块<code>前</code>执行一系列语句，如关闭数据库、清理对象等。</p>
<p>当前代码块存在多个<code>defer</code>语句时，defer语句会按照定义时的顺序从后往前执行。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">aDefer</span>() &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++第一行&quot;</span>)<br>    <span class="hljs-keyword">defer</span> &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++defer 1&quot;</span>)<br>    &#125;<br>    <span class="hljs-keyword">defer</span> &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++defer 2&quot;</span>)<br>    &#125;<br><span class="hljs-comment">//    print(&quot;++测试defer是否中断&quot;)</span><br><span class="hljs-comment">//    if true &#123;</span><br><span class="hljs-comment">//        return</span><br><span class="hljs-comment">//    &#125;</span><br>    <span class="hljs-keyword">defer</span> &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++defer 3&quot;</span>)<br>    &#125;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;++要结束咯&quot;</span>)<br>&#125;<br><span class="hljs-comment">//调用</span><br>aDefer()<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">打印结果：</span><br><span class="hljs-comment">++第一行</span><br><span class="hljs-comment">++要结束咯</span><br><span class="hljs-comment">++defer 3</span><br><span class="hljs-comment">++defer 2</span><br><span class="hljs-comment">++defer 1</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>

<p>defer语句可以被return，error等打断，即执行到defer语句前如果代码已经返回，那么defer将不会被执行。可将上面例子中的注释语句打开并重新运行看看结果：</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">打印日志：</span><br><span class="hljs-literal">++</span><span class="hljs-comment">第一行</span><br><span class="hljs-literal">++</span><span class="hljs-comment">测试defer是否中断</span><br><span class="hljs-literal">++</span><span class="hljs-comment">defer 2</span><br><span class="hljs-literal">++</span><span class="hljs-comment">defer 1</span><br></code></pre></td></tr></table></figure>

<p>即第三个defer前代码块被return，则后续defer及”print(“++要结束咯”)“均未执行。</p>
<h3 id="18-typealias"><a href="#18-typealias" class="headerlink" title="18.typealias"></a>18.typealias</h3><p>作用：给已有类型重新定义名称，方便代码阅读。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-comment">//eg:1.已有类型的重新命名</span><br><span class="hljs-keyword">typealias</span>  <span class="hljs-type">Address</span> <span class="hljs-operator">=</span> <span class="hljs-type">CGPoint</span><br><br><span class="hljs-keyword">let</span> point: <span class="hljs-type">CGPoint</span> <span class="hljs-operator">=</span> <span class="hljs-type">CGPoint</span>(x: <span class="hljs-number">0</span>,y: <span class="hljs-number">0</span>)<br><span class="hljs-comment">//等价于</span><br><span class="hljs-keyword">let</span> point: <span class="hljs-type">Address</span> <span class="hljs-operator">=</span> <span class="hljs-type">CGPoint</span>(x: <span class="hljs-number">0</span>,y: <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>

<p>常见应用场景：定义闭包，类似oc的 block 定义。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">typealias</span> successBlock <span class="hljs-operator">=</span> (<span class="hljs-keyword">_</span> code: <span class="hljs-type">Int</span>, <span class="hljs-keyword">_</span> message: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Void</span><br><span class="hljs-keyword">var</span> callBack: successBlock<span class="hljs-operator">?</span><br><span class="hljs-keyword">self</span>.callBack<span class="hljs-operator">!</span>(code: <span class="hljs-number">200</span>, message: <span class="hljs-string">&quot;ok&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="19-泛型"><a href="#19-泛型" class="headerlink" title="19.泛型"></a>19.泛型</h3><p>泛型是一种类型参数，是指定并命名一个参数的类型的占位符。在定义类、结构体中的元素或函数中的参数、返回值时，对于类型暂时不确定的，只在调用时才能确定具体类型的，可以引入泛型。</p>
<h4 id="1-语法-1"><a href="#1-语法-1" class="headerlink" title="1.语法"></a>1.语法</h4><p>以<code>&lt;T&gt;</code>形式声明泛型，尖括号中可以有多个泛型命名，以逗号隔开。</p>
<ul>
<li>用在函数参数中：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">swapTwoValues</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">_</span> <span class="hljs-params">a</span>: <span class="hljs-keyword">inout</span> <span class="hljs-type">T</span>, <span class="hljs-keyword">_</span> <span class="hljs-params">b</span>: <span class="hljs-keyword">inout</span> <span class="hljs-type">T</span>) &#123;<br>    <span class="hljs-keyword">let</span> temporaryA <span class="hljs-operator">=</span> a<br>    a <span class="hljs-operator">=</span> b<br>    b <span class="hljs-operator">=</span> temporaryA<br>&#125;<br><span class="hljs-keyword">var</span> someInt <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br><span class="hljs-keyword">var</span> anotherInt <span class="hljs-operator">=</span> <span class="hljs-number">107</span><br>swapTwoValues(<span class="hljs-operator">&amp;</span>someInt, <span class="hljs-operator">&amp;</span>anotherInt)<br><span class="hljs-comment">// someInt is now 107, and anotherInt is now 3</span><br><br><br><span class="hljs-keyword">var</span> someString <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><br><span class="hljs-keyword">var</span> anotherString <span class="hljs-operator">=</span> <span class="hljs-string">&quot;world&quot;</span><br>swapTwoValues(<span class="hljs-operator">&amp;</span>someString, <span class="hljs-operator">&amp;</span>anotherString)<br><span class="hljs-comment">// someString is now &quot;world&quot;, and anotherString is now &quot;hello&quot;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>用在自定义的类型中：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-title class_">Element</span>&gt; &#123;<br>    <span class="hljs-keyword">var</span> items: [<span class="hljs-type">Element</span>] <span class="hljs-operator">=</span> []<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">push</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Element</span>) &#123;<br>        items.append(item)<br>    &#125;<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">pop</span>() -&gt; <span class="hljs-type">Element</span> &#123;<br>        <span class="hljs-keyword">return</span> items.removeLast()<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 使用</span><br><span class="hljs-keyword">var</span> aStack <span class="hljs-operator">=</span> <span class="hljs-type">Stack</span>&lt;<span class="hljs-type">String</span>&gt;() <span class="hljs-comment">// 指定具体类型</span><br>aStack.push(<span class="hljs-string">&quot;uno&quot;</span>)<br><span class="hljs-keyword">let</span> fromTheTop <span class="hljs-operator">=</span> aStack.pop()<br></code></pre></td></tr></table></figure>

<p>数组、字典也都是泛型集合，是泛型的典型应用：</p>
<ul>
<li>Array&lt;Element&gt;</li>
<li>Dictionary&lt;Key, Value&gt;</li>
</ul>
<p>这里的<code>Element</code>、<code>Key</code>、<code>Value</code>都用来表示某种数据类型。</p>
<h4 id="2-扩展泛型"><a href="#2-扩展泛型" class="headerlink" title="2.扩展泛型"></a>2.扩展泛型</h4><p>可以通过<code>extension</code>给现有泛型增加新的功能。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-title class_">Element</span>&gt; &#123;<br>    <span class="hljs-keyword">var</span> items <span class="hljs-operator">=</span> [<span class="hljs-type">Element</span>]()<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">push</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Element</span>) &#123;<br>        items.append(item)<br>    &#125;<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">pop</span>() -&gt; <span class="hljs-type">Element</span> &#123;<br>        <span class="hljs-keyword">return</span> items.removeLast()<br>    &#125;<br>&#125;<br> <br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Stack</span> &#123;<br>    <span class="hljs-keyword">var</span> topItem: <span class="hljs-type">Element</span>? &#123; <span class="hljs-comment">// 新增的计算属性</span><br>       <span class="hljs-keyword">return</span> items.isEmpty <span class="hljs-operator">?</span> <span class="hljs-literal">nil</span> : items[items.count <span class="hljs-operator">-</span> <span class="hljs-number">1</span>]<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">var</span> aStack <span class="hljs-operator">=</span> <span class="hljs-type">Stack</span>&lt;<span class="hljs-type">String</span>&gt;()<br>aStack.push(<span class="hljs-string">&quot;google&quot;</span>)<br>aStack.push(<span class="hljs-string">&quot;runoob&quot;</span>)<br> <br><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> topItem <span class="hljs-operator">=</span> aStack.topItem &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;栈顶元素：<span class="hljs-subst">\(topItem)</span>.&quot;</span>)<br>&#125;<br> <br><span class="hljs-built_in">print</span>(aStack.items)<br></code></pre></td></tr></table></figure>

<h4 id="3-类型约束"><a href="#3-类型约束" class="headerlink" title="3.类型约束"></a>3.类型约束</h4><p>给泛型设置约束，限制其可使用的类型，如必须继承自某个类或遵循某个协议。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">findIndex</span>&lt;<span class="hljs-type">T</span>: <span class="hljs-type">Equatable</span>&gt;(<span class="hljs-params">of</span> <span class="hljs-params">valueToFind</span>: <span class="hljs-type">T</span>, <span class="hljs-params">in</span> <span class="hljs-params">array</span>:[<span class="hljs-type">T</span>]) -&gt; <span class="hljs-type">Int</span>? &#123;<br>    <span class="hljs-keyword">for</span> (index, value) <span class="hljs-keyword">in</span> array.enumerated() &#123;<br>        <span class="hljs-keyword">if</span> value <span class="hljs-operator">==</span> valueToFind &#123;<br>            <span class="hljs-keyword">return</span> index<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><span class="hljs-keyword">let</span> doubleIndex <span class="hljs-operator">=</span> findIndex(of: <span class="hljs-number">9.3</span>, in: [<span class="hljs-number">3.14159</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">0.25</span>])<br><span class="hljs-comment">// doubleIndex is an optional Int with no value, because 9.3 isn&#x27;t in the array</span><br><span class="hljs-keyword">let</span> stringIndex <span class="hljs-operator">=</span> findIndex(of: <span class="hljs-string">&quot;Andrea&quot;</span>, in: [<span class="hljs-string">&quot;Mike&quot;</span>, <span class="hljs-string">&quot;Malcolm&quot;</span>, <span class="hljs-string">&quot;Andrea&quot;</span>])<br><span class="hljs-comment">// stringIndex is an optional Int containing a value of 2</span><br></code></pre></td></tr></table></figure>

<h4 id="4-associatedtype"><a href="#4-associatedtype" class="headerlink" title="4.associatedtype"></a>4.associatedtype</h4><ul>
<li>语法</li>
</ul>
<p>协议中不支持<code>&lt;T&gt;</code>这种方式定义泛型，使用<code>associatedtype</code>关键字定义某种泛型，在协议的实现类中才指明此泛型具体是何类型。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-keyword">associatedtype</span> <span class="hljs-type">Item</span>  <span class="hljs-comment">//这个Item就是泛型，可现在协议中用着</span><br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">append</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Item</span>)<br>    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">subscript</span>(<span class="hljs-params">i</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Item</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">IntStack</span>: <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-comment">// IntStack 类的自有部分</span><br>    <span class="hljs-keyword">var</span> items: [<span class="hljs-type">Int</span>] <span class="hljs-operator">=</span> []<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">push</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Int</span>) &#123;<br>        items.append(item)<br>    &#125;<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">pop</span>() -&gt; <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> items.removeLast()<br>    &#125;<br>    <span class="hljs-comment">// 实现 Container 协议的部分</span><br>    <span class="hljs-keyword">typealias</span> <span class="hljs-type">Item</span> <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>  <span class="hljs-comment">//这里指明Item是Int类型</span><br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">append</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Int</span>) &#123;<br>        <span class="hljs-keyword">self</span>.push(item)<br>    &#125;<br>    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> items.count<br>    &#125;<br>    <span class="hljs-keyword">subscript</span>(<span class="hljs-params">i</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> items[i]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>约束关联类型</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-keyword">associatedtype</span> <span class="hljs-type">Item</span>: <span class="hljs-type">Equatable</span>    <span class="hljs-comment">// 这里约束泛型须遵循Equatable协议</span><br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">append</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Item</span>)<br>    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">subscript</span>(<span class="hljs-params">i</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Item</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5-where语句"><a href="#5-where语句" class="headerlink" title="5.where语句"></a>5.where语句</h4><ul>
<li>泛型类型定义中的<code>where</code>：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-title class_">Element</span>&gt; <span class="hljs-title class_">where</span> <span class="hljs-title class_">Element</span>:<span class="hljs-title class_">Equatable</span> &#123;&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>extension中的<code>where</code>：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Stack</span> <span class="hljs-title class_">where</span> <span class="hljs-title class_">Element</span>:<span class="hljs-title class_">Equatable</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">isItemInStack</span>(<span class="hljs-params">item</span>:<span class="hljs-type">Element</span>)-&gt;<span class="hljs-type">Bool</span> &#123;<br>        <span class="hljs-keyword">for</span> stackItem <span class="hljs-keyword">in</span> items &#123;<br>            <span class="hljs-keyword">if</span> stackItem <span class="hljs-operator">==</span> item &#123; <span class="hljs-comment">//比较大小须遵守Equatable协议</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>参数列表中的<code>where</code>：</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-keyword">associatedtype</span> <span class="hljs-type">ItemType</span><br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">append</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">ItemType</span>)<br>    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>    <span class="hljs-keyword">subscript</span>(<span class="hljs-params">i</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">ItemType</span> &#123; <span class="hljs-keyword">get</span> &#125;<br>&#125;<br> <br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Stack</span>&lt;<span class="hljs-title class_">Element</span>&gt;: <span class="hljs-title class_">Container</span> &#123;<br>    <span class="hljs-comment">// Stack&lt;Element&gt; 的原始实现部分</span><br>    <span class="hljs-keyword">var</span> items <span class="hljs-operator">=</span> [<span class="hljs-type">Element</span>]()<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">push</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Element</span>) &#123;<br>        items.append(item)<br>    &#125;<br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">pop</span>() -&gt; <span class="hljs-type">Element</span> &#123;<br>        <span class="hljs-keyword">return</span> items.removeLast()<br>    &#125;<br>    <span class="hljs-comment">// Container 协议的实现部分</span><br>    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">append</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Element</span>) &#123;<br>        <span class="hljs-keyword">self</span>.push(item)<br>    &#125;<br>    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> items.count<br>    &#125;<br>    <span class="hljs-keyword">subscript</span>(<span class="hljs-params">i</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Element</span> &#123;<br>        <span class="hljs-keyword">return</span> items[i]<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">extension</span> <span class="hljs-title class_">Array</span>: <span class="hljs-title class_">Container</span> &#123;&#125;<br> <br><span class="hljs-keyword">func</span> <span class="hljs-title function_">allItemsMatch</span>&lt;<span class="hljs-type">C1</span>: <span class="hljs-type">Container</span>, <span class="hljs-type">C2</span>: <span class="hljs-type">Container</span>&gt;<br>    (<span class="hljs-keyword">_</span> <span class="hljs-params">someContainer</span>: <span class="hljs-type">C1</span>, <span class="hljs-keyword">_</span> <span class="hljs-params">anotherContainer</span>: <span class="hljs-type">C2</span>) -&gt; <span class="hljs-type">Bool</span><br>    <span class="hljs-keyword">where</span> <span class="hljs-type">C1</span>.<span class="hljs-type">ItemType</span> <span class="hljs-operator">==</span> <span class="hljs-type">C2</span>.<span class="hljs-type">ItemType</span>, <span class="hljs-type">C1</span>.<span class="hljs-type">ItemType</span>: <span class="hljs-type">Equatable</span> &#123;<br>        <span class="hljs-keyword">if</span> someContainer.count <span class="hljs-operator">!=</span> anotherContainer.count &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span>someContainer.count &#123;<br>            <span class="hljs-keyword">if</span> someContainer[i] <span class="hljs-operator">!=</span> anotherContainer[i] &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><span class="hljs-keyword">var</span> tos <span class="hljs-operator">=</span> <span class="hljs-type">Stack</span>&lt;<span class="hljs-type">String</span>&gt;()<br>tos.push(<span class="hljs-string">&quot;google&quot;</span>)<br>tos.push(<span class="hljs-string">&quot;baidu&quot;</span>)<br>tos.push(<span class="hljs-string">&quot;microsoft&quot;</span>)<br> <br><span class="hljs-keyword">var</span> aos <span class="hljs-operator">=</span> [<span class="hljs-string">&quot;google&quot;</span>, <span class="hljs-string">&quot;baidu&quot;</span>, <span class="hljs-string">&quot;microsoft&quot;</span>]<br> <br><span class="hljs-keyword">if</span> allItemsMatch(tos, aos) &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;匹配所有元素&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;元素不匹配&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="20-some"><a href="#20-some" class="headerlink" title="20.some"></a>20.some</h3><h4 id="1-作用"><a href="#1-作用" class="headerlink" title="1.作用"></a>1.作用</h4><p>在标注属性、下标、函数返回值的类型时，对内保存返回值的类型信息，对外隐藏类型信息。</p>
<p>示例1：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">IOS</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">run</span>()<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">iPhone</span>: <span class="hljs-title class_">IOS</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">run</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;run on iPhone&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">iPad</span>: <span class="hljs-title class_">IOS</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">run</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;run on iPad&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">func</span> <span class="hljs-title function_">whoCalls</span>() -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">IOS</span> &#123; <span class="hljs-comment">// 这里 some 关键字标注的就是不透明类型</span><br>    <span class="hljs-keyword">return</span> iPad()<br>&#125;<br></code></pre></td></tr></table></figure>

<p>不透明类型，以<code>some+协议</code>配合使用，通常用作函数的返回值类型：当函数返回不透明类型时，其返回值不使用具体的类型，而是用它支持的协议来描述。</p>
<p>上面的示例中，<code>whoCalls()</code>返回的就是不透明类型<code>some IOS</code>。调用者并不关心函数返回值的真实类型是啥，也不关心函数内部的具体实现，只需知道返回值是个遵循<code>IOS</code>协议的类型。</p>
<h4 id="2-对比泛型"><a href="#2-对比泛型" class="headerlink" title="2.对比泛型"></a>2.对比泛型</h4><p>作为函数返回值类型时：</p>
<p><code>泛型</code>：让函数的调用者来选择一种返回值的具体类型；</p>
<p><code>不透明类型</code>：让函数体来选择一种返回值的具体类型；</p>
<p>示例2：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">max</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">_</span> <span class="hljs-params">x</span>: <span class="hljs-type">T</span>, <span class="hljs-keyword">_</span> <span class="hljs-params">y</span>: <span class="hljs-type">T</span>) -&gt; <span class="hljs-type">T</span> <span class="hljs-keyword">where</span> <span class="hljs-type">T</span>: <span class="hljs-type">Comparable</span> &#123; <span class="hljs-operator">...</span> &#125;<br></code></pre></td></tr></table></figure>
<p>这个泛型场景中，<code>max()</code>函数的返回值类型是根据调用者传进来的类型而定的。调用者传入<code>x</code>，<code>y</code>的值，它们的类型决定了<code>T</code>的具体类型，函数内部仅仅使用了<code>Comparable</code>协议定义的通用功能。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">func</span> <span class="hljs-title function_">whoCalls</span>() -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">IOS</span> &#123;<br>    <span class="hljs-keyword">return</span> iPad()<br>&#125;<br></code></pre></td></tr></table></figure>
<p>示例1中，函数体内通过<code>return iPad()</code>指定了返回值的具体类型是<code>iPad</code>，而且通过<code>some IOS</code>不透明类型，对外隐藏了返回值的具体类型，调用者只知道该返回值遵循了<code>IOS</code>协议。</p>
<p>所以，作为函数返回值时，不透明类型与泛型的作用正好相反~</p>
<h4 id="3-对比协议"><a href="#3-对比协议" class="headerlink" title="3.对比协议"></a>3.对比协议</h4><p>作为函数返回值类型时：</p>
<p><code>协议</code>：可以是所有遵循了此协议的对象；</p>
<p><code>不透明类型</code>：只能是某一种遵循了此协议的对象；</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">IOS</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">run</span>()<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">iPhone</span>: <span class="hljs-title class_">IOS</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">run</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;run on iPhone&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">iPad</span>: <span class="hljs-title class_">IOS</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">run</span>() &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;run on iPad&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Device</span> &#123;<br>    <span class="hljs-keyword">case</span> iPhone<br>    <span class="hljs-keyword">case</span> iPad<br>&#125;<br><span class="hljs-comment">//报错：Function declares an opaque return type, but the return statements in its body do</span><br><span class="hljs-keyword">func</span> <span class="hljs-title function_">opaqueCalls</span>(<span class="hljs-params">type</span> <span class="hljs-params">device</span>: <span class="hljs-type">Device</span>) -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">IOS</span> &#123;<br>    <span class="hljs-keyword">if</span> device <span class="hljs-operator">==</span> .iPhone &#123; <span class="hljs-comment">// if else 分支返回的类型不同 会导致报错</span><br>        <span class="hljs-keyword">return</span> iPhone()<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> iPad()<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 使用协议</span><br><span class="hljs-keyword">func</span> <span class="hljs-title function_">protoCalls</span>(<span class="hljs-params">type</span> <span class="hljs-params">device</span>: <span class="hljs-type">Device</span>) -&gt; <span class="hljs-type">IOS</span> &#123;<br>    <span class="hljs-keyword">if</span> device <span class="hljs-operator">==</span> .iPhone &#123;<br>        <span class="hljs-keyword">return</span> iPhone()<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> iPad()<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 使用泛型</span><br><span class="hljs-keyword">func</span> <span class="hljs-title function_">geneticCalls</span>&lt;<span class="hljs-type">T</span>: <span class="hljs-type">IOS</span>&gt;(<span class="hljs-params">type</span> <span class="hljs-params">device</span>: <span class="hljs-type">T</span>) -&gt; <span class="hljs-type">T</span> &#123;<br>    <span class="hljs-keyword">return</span> device<br>&#125;<br><br><span class="hljs-comment">// 协议类型返回值</span><br><span class="hljs-keyword">let</span> iphone1 <span class="hljs-operator">=</span> protoCalls(type: .iPhone)<br><span class="hljs-keyword">let</span> iphone2 <span class="hljs-operator">=</span> protoCalls(type: .iPhone)<br>iphone1 <span class="hljs-operator">==</span> iphone2 <span class="hljs-comment">// 报错</span><br><span class="hljs-comment">// 泛型返回值</span><br><span class="hljs-keyword">let</span> ipad1 <span class="hljs-operator">=</span> geneticCalls(type: iPad())<br><span class="hljs-keyword">let</span> ipad2 <span class="hljs-operator">=</span> geneticCalls(type: iPad())<br>ipad1 <span class="hljs-operator">==</span> ipad2     <span class="hljs-comment">// 报错</span><br></code></pre></td></tr></table></figure>

<p><code>some</code>返回值的函数<code>opaqueCalls</code>中，使用类似<code>if</code>这样的分支语句返回多种不同类型时会报错。</p>
<p>协议类型返回值的函数<code>protoCalls</code>中，可以返回不同类型的对象，只要遵循<code>IOS</code>协议即可。</p>
<p>所以，不透明类型实际是对内保存了明确类型信息的，比协议的要求更为严格~</p>
<p>另外，对于泛型或协议类型的返回值，不能使用<code>==</code>比较类型。一是因为<code>IOS</code>协议中并未定义<code>==</code>操作符；二是<code>==</code>左右两边的返回值的类型不确定！</p>
<h4 id="4-any"><a href="#4-any" class="headerlink" title="4.any"></a>4.any</h4><p>boxed protocol type，用于定义一个类型，该类型须遵循指定的协议。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs SWIFT"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Shape</span> &#123;<br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() -&gt; <span class="hljs-type">String</span><br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">VerticalShapes</span>: <span class="hljs-title class_">Shape</span> &#123;<br>    <span class="hljs-keyword">var</span> shapes: [<span class="hljs-keyword">any</span> <span class="hljs-type">Shape</span>] <span class="hljs-comment">// 看这里</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() -&gt; <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">return</span> shapes.map &#123; <span class="hljs-variable">$0</span>.draw() &#125;.joined(separator: <span class="hljs-string">&quot;<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Triangle</span>: <span class="hljs-title class_">Shape</span> &#123;<br>    <span class="hljs-keyword">var</span> size: <span class="hljs-type">Int</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() -&gt; <span class="hljs-type">String</span> &#123;<br>       <span class="hljs-keyword">var</span> result: [<span class="hljs-type">String</span>] <span class="hljs-operator">=</span> []<br>       <span class="hljs-keyword">for</span> length <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><span class="hljs-operator">...</span>size &#123;<br>           result.append(<span class="hljs-type">String</span>(repeating: <span class="hljs-string">&quot;*&quot;</span>, count: length))<br>       &#125;<br>       <span class="hljs-keyword">return</span> result.joined(separator: <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Square</span>: <span class="hljs-title class_">Shape</span> &#123;<br>    <span class="hljs-keyword">var</span> size: <span class="hljs-type">Int</span><br>    <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() -&gt; <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">let</span> line <span class="hljs-operator">=</span> <span class="hljs-type">String</span>(repeating: <span class="hljs-string">&quot;*&quot;</span>, count: size)<br>        <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;(repeating: line, count: size)<br>        <span class="hljs-keyword">return</span> result.joined(separator: <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> largeTriangle <span class="hljs-operator">=</span> <span class="hljs-type">Triangle</span>(size: <span class="hljs-number">5</span>)<br><span class="hljs-keyword">let</span> largeSquare <span class="hljs-operator">=</span> <span class="hljs-type">Square</span>(size: <span class="hljs-number">5</span>)<br><span class="hljs-keyword">let</span> vertical <span class="hljs-operator">=</span> <span class="hljs-type">VerticalShapes</span>(shapes: [largeTriangle, largeSquare])<br><span class="hljs-built_in">print</span>(vertical.draw())<br></code></pre></td></tr></table></figure>

<p>数组<code>shapes</code>中的元素可以是不同类型，但都必须遵循<code>Shape</code>协议。</p>
<p><code>some</code>与<code>any</code>的区别在于是否保存明确的类型信息。</p>
<ul>
<li><code>some</code>必须指定某一个具体类型；</li>
<li><code>any</code>可以是任何类型，只要遵循某个协议即可；</li>
</ul>
<hr>
<p>相关参考：</p>
<p>#<a target="_blank" rel="noopener" href="https://github.com/CocoaChina-editors/Welcome-to-Swift/blob/master/UsingSwiftwithCocoaandObjective-C%E4%B8%AD%E6%96%87%E6%89%8B%E5%86%8C.md">©Swift翻译组</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Swift/" class="category-chain-item">Swift</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Swift/">#Swift</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Swift一览</div>
      <div>https://davidlii.cn/2018/08/12/swift-basic.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Davidli</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2018年8月12日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2018/08/15/swift-block.html" title="Swift闭包">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Swift闭包</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2018/07/30/memory.html" title="内存分配">
                        <span class="hidden-mobile">内存分配</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://github.com/davidli-" target="_blank" rel="nofollow noopener"><span>嵇风</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
